<!DOCTYPE html>
<html>

	<head>
		
<title>golang中map的常见操作-Russshare</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" type="image/x-icon" href="/image/favicon.ico">


<meta name="keywords" content="数据结构,map,">
<meta name="description" content="">


<script src="/js/jquery.min.js"></script>



<!-- Baidu Analytics -->
<script defer>
    var _hmt = _hmt || [];
    (function () {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?4b5fe1472f22fa";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
    })();
</script>


	<meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="/atom.xml" title="RiddleGo" type="application/atom+xml">
</head>

	<body>
		
<link rel="stylesheet" href="/css/page.css">


<link rel="stylesheet" href="/css/page_cente.css">


<link rel="stylesheet" href="/css/atom-one-dark.css">


<link rel="stylesheet" href="/css/header.css">

	<div class="header">
		<div class="header-top">
			<div class="h-left">
				<a href="/">
					<img src="/image/logo.png" alt="Quiet">
				</a>
			</div>
			<div class="h-right">
				<ul>
					
						
								<li>
									<a href="/">
										HOME
									</a>
									<span class="dot"></span>
								</li>
								
									
						
								<li>
									<a href="/archives">
										ARCHIVE
									</a>
									<span class="dot"></span>
								</li>
								
									
						
								<li>
									<a href="/categories">
										CATEGORIES
									</a>
									<span class="dot"></span>
								</li>
								
									
						
								<li>
									<a href="/tags">
										TAGS
									</a>
									<span class="dot"></span>
								</li>
								
									
						
								<li>
									<a href="/links">
										LINKS
									</a>
									<span class="dot"></span>
								</li>
								
									
						
								<li>
									<a href="/about">
										ABOUT
									</a>
									<span class="dot"></span>
								</li>
								
									
				</ul>
			</div>
			<div class="h-right-close">
				<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
					<path fill="none" d="M0 0h24v24H0z" />
					<path d="M3 4h18v2H3V4zm0 7h18v2H3v-2zm0 7h18v2H3v-2z" fill="rgba(68,68,68,1)" />
				</svg>
			</div>
		</div>
	</div>
	<div class="sidebar">
    <div class="topo">
        <h2>Russshare</h2>
    </div>
    <ul>
        
        <li>
            <a href="/">HOME</a>
        </li>
        
        <li>
            <a href="/archives">ARCHIVE</a>
        </li>
        
        <li>
            <a href="/categories">CATEGORIES</a>
        </li>
        
        <li>
            <a href="/tags">TAGS</a>
        </li>
        
        <li>
            <a href="/links">LINKS</a>
        </li>
        
        <li>
            <a href="/about">ABOUT</a>
        </li>
        
    </ul>
    <div class="my_foot">
        
        <a target="_blank" rel="noopener" href="https://github.com/RiddleGo">
            <img src="https://cdn.jsdelivr.net/gh/duogongneng/MyBlogImg/imggithub.png" alt="Quiet主题">
        </a>
        
    </div>
</div>
<div class='shelter'
    style='cursor: pointer;display: none; position: fixed;left: 0;top: 0; right: 0;bottom: 0;background-color: #333;opacity:0.5;z-index: 108;'>
</div>
<style>
    .sidebar {
        width: 0;
        height: 100%;
        position: fixed;
        top: 0;
        right: 0;
        bottom: 0;
        background: #fff;
        z-index: 999;
        text-align: center;
        box-shadow: -6px 0 20px rgba(98, 94, 94, .815)
    }

    .topo {
        width: 100%;
        height: 200px;
        background: url(https://api.ixiaowai.cn/gqapi/gqapi.php) no-repeat;
        background-size: 100% 100%;
        position: relative;
        display: flex;
        align-items: flex-end
    }

    .topo h2 {
        color: #fff;
        z-index: 1;
        position: relative;
        margin: 0 0 10px 10px;
        font-size: 1.2em;
        box-sizing: border-box
    }

    .topo:before {
        content: '';
        background-image: url(/image/pattern.png);
        background-repeat: repeat;
        height: 100%;
        left: 0;
        position: absolute;
        top: 0;
        width: 100%;
        z-index: 1
    }

    .sidebar ul {
        width: 100%;
        margin-top: 50px
    }

    .sidebar ul li {
        height: 50px;
        list-style: none;
        font-size: 1.2em;
        text-align: right;
        margin-right: 10px
    }

    .sidebar ul li a {
        display: grid;
        color: #5d606a;
        text-overflow: ellipsis;
        width: 100%;
        text-decoration: none
    }

    .my_foot {
        width: 100%;
        padding: 10px;
        margin-bottom: 10px;
        position: absolute;
        bottom: 0
    }

    .my_foot a {
        text-decoration: none;
        margin-right: 10px;
        display: inline-block
    }

    .my_foot a img {
        width: 30px;
        height: 30px
    }
</style>

<script>
    $(function () { $('.h-right-close>svg').click(function () { $('.sidebar').animate({ width: "66%" }, 500); $('.shelter').fadeIn("slow") }); $('.shelter').click(function (e) { $('.sidebar').animate({ width: "0" }, 500); $('.shelter').fadeOut("slow") }) })
</script>
		<script>
			$(function () { $(window).scroll(function () { if ($(document).scrollTop() > 100) { $(".header-top").removeClass("header-move2"); $('.header-top').addClass('header-move1') } else { $(".header-top").removeClass("header-move1"); $('.header-top').addClass('header-move2') } }) });
		</script>
<div class="header-bg ">
    <div class="bg-content">
        <ul class="tag">
            
            
            <li><a href="/tags/数据结构">数据结构</a></li>
            
            <li><a href="/tags/map">map</a></li>
            
            
        </ul>
        <h1>golang中map的常见操作</h1>
        <div class="article-info">
            <div class="article-author">
                
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20">
                    <g>
                        <path fill="#12183A"
                            d="M6.187 15.265A6.47 6.47 0 0 0 10 16.5a6.47 6.47 0 0 0 3.813-1.235A4.99 4.99 0 0 0 10 13.5a4.99 4.99 0 0 0-3.813 1.765zM5.082 14.25A6.485 6.485 0 0 1 10 12c1.965 0 3.726.872 4.918 2.25a6.5 6.5 0 1 0-9.836 0zM10 18a8 8 0 1 1 0-16 8 8 0 0 1 0 16zm0-7a3 3 0 1 1 0-6 3 3 0 0 1 0 6zm0-1.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3z">
                        </path>
                    </g>
                </svg>
                
                <span> <a href="">Russshare</a></span>
                <p>2021-05-31 21:22:31</p>
            </div>
        </div>
    </div>
</div>
<div class="article-content">
    <div id="article" class="content">
        <h3 id="前言："><a href="#前言：" class="headerlink" title="前言："></a>前言：</h3><p>我其实有学过golang的map，但是学了不怎么用，就忘了。我深深体会，最好的记忆方式就是重复。为了每次我使用都得去百度，就从这次百度了做个笔记吧</p>
<h3 id="1、golang中的map"><a href="#1、golang中的map" class="headerlink" title="1、golang中的map"></a>1、golang中的map</h3><p>Go 中 Map是<strong>一种无序</strong>的键值对的集合。Map最重要的一点是通过key来快速检索数据，key类似于索引，指向数据的值。<br>Map是一种集合，所以我们可以像迭代数组和切片那样迭代它。不过，Map是无序的，我们无法决定它的返回顺序，这是因为Map是使用链式hash表来实现的。</p>
<figure class="highlight lasso"><table><tr><td class="code"><pre><code class="hljs lasso">在C++ STL 中<span class="hljs-built_in">map</span> 采用红黑树实现，可以实现有序的<span class="hljs-built_in">Map</span>.<br><br>在PHP中，<span class="hljs-built_in">Array</span>就是一个有序的<span class="hljs-built_in">map</span><br></code></pre></td></tr></table></figure>

<h3 id="2、map的基本操作-增删改查"><a href="#2、map的基本操作-增删改查" class="headerlink" title="2、map的基本操作-增删改查"></a>2、map的基本操作-增删改查</h3><h4 id="2、1-map-增加和更新"><a href="#2、1-map-增加和更新" class="headerlink" title="2、1 map 增加和更新"></a>2、1 map 增加和更新</h4><figure class="highlight go"><table><tr><td class="code"><pre><code class="hljs go">cities := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">map</span>[<span class="hljs-keyword">string</span>]<span class="hljs-keyword">string</span>)<br><span class="hljs-keyword">map</span>[<span class="hljs-string">&quot;key&quot;</span>] = value <br></code></pre></td></tr></table></figure>
<p>如果 key 还没有，就是增加，如果 key 存在就是修改</p>
<h4 id="2、2-map-删除"><a href="#2、2-map-删除" class="headerlink" title="2、2 map 删除"></a>2、2 map 删除</h4><figure class="highlight n1ql"><table><tr><td class="code"><pre><code class="hljs n1ql">说明：<br><span class="hljs-keyword">delete</span>(<span class="hljs-keyword">map</span>，<span class="hljs-string">&quot;key&quot;</span>) <br><br>func <span class="hljs-keyword">delete</span>(m <span class="hljs-keyword">map</span>[<span class="hljs-built_in">Type</span>]Type1， <span class="hljs-keyword">key</span> <span class="hljs-built_in">Type</span>)<br><br></code></pre></td></tr></table></figure>
<p>delete 是一个内置函数，如果 key 存在，就删除该 key-value<br>如果 key 不存在，不操作，但是也不会报错</p>
<p>细节说明<br>如果我们要删除 map 的所有 key ,没有一个专门的方法一次删除，可以遍历一下 key, 逐个删除<br>或者 map = make(…)，make 一个新的，让原来的成为垃圾，被 gc 回收</p>
<h4 id="2、3-map-查找"><a href="#2、3-map-查找" class="headerlink" title="2、3 map 查找"></a>2、3 map 查找</h4><figure class="highlight stylus"><table><tr><td class="code"><pre><code class="hljs stylus"><span class="hljs-comment">//演示map的查找</span><br>val, ok := cities<span class="hljs-selector-attr">[<span class="hljs-string">&quot;no1&quot;</span>]</span><br><span class="hljs-keyword">if</span> ok &#123;<br>	fmt<span class="hljs-selector-class">.Printf</span>(<span class="hljs-string">&quot;有no1 key 值为%v\n&quot;</span>, val)<br>&#125; <span class="hljs-keyword">else</span> &#123;<br>	fmt<span class="hljs-selector-class">.Printf</span>(<span class="hljs-string">&quot;没有no1 key\n&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure>
<p>如果 cities这个 map 中存在 “no2” ， 那么 ok就会返回 true，否则返回 false</p>
<h4 id="2、4-map-遍历"><a href="#2、4-map-遍历" class="headerlink" title="2、4 map 遍历"></a>2、4 map 遍历</h4><p>说明：map 的遍历使用 for-range 的结构遍历</p>
<figure class="highlight go"><table><tr><td class="code"><pre><code class="hljs go"><span class="hljs-comment">//使用for-range遍历map</span><br>cities := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">map</span>[<span class="hljs-keyword">string</span>]<span class="hljs-keyword">string</span>)<br>cities[<span class="hljs-string">&quot;no1&quot;</span>] = <span class="hljs-string">&quot;北京&quot;</span><br>cities[<span class="hljs-string">&quot;no2&quot;</span>] = <span class="hljs-string">&quot;天津&quot;</span><br>cities[<span class="hljs-string">&quot;no3&quot;</span>] = <span class="hljs-string">&quot;上海&quot;</span><br> <br><span class="hljs-keyword">for</span> k, v := <span class="hljs-keyword">range</span> cities &#123;<br>	fmt.Printf(<span class="hljs-string">&quot;k=%v v=%v\n&quot;</span>, k, v)<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="2、5-map-的长度"><a href="#2、5-map-的长度" class="headerlink" title="2、5 map 的长度"></a>2、5 map 的长度</h4><figure class="highlight go"><table><tr><td class="code"><pre><code class="hljs go">cities := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">map</span>[<span class="hljs-keyword">string</span>]<span class="hljs-keyword">string</span>)<br>cities[<span class="hljs-string">&quot;no1&quot;</span>] = <span class="hljs-string">&quot;北京&quot;</span><br>cities[<span class="hljs-string">&quot;no2&quot;</span>] = <span class="hljs-string">&quot;天津&quot;</span><br>cities[<span class="hljs-string">&quot;no3&quot;</span>] = <span class="hljs-string">&quot;上海&quot;</span><br> <br>fmt.Println(<span class="hljs-string">&quot;cities 有&quot;</span>, <span class="hljs-built_in">len</span>(cities), <span class="hljs-string">&quot; 对 key-value&quot;</span>)<br></code></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">len</span><span class="hljs-params">(v Type)</span> <span class="hljs-title">int</span></span><br><br>内建函数<span class="hljs-built_in">len</span>返回v的长度，这取决于具体类型:<br>数组: v中元素的数量<br>数组指针:*v中元素的数量（v为<span class="hljs-literal">nil</span>时<span class="hljs-built_in">panic</span>)<br>切片、映射: v中元素的数量;若v为<span class="hljs-literal">nil</span>，<span class="hljs-built_in">len</span>(v)即为零字符串: v中字节的数量<br>通道:通道缓存中队列（未读取）元素的数量;若v为<span class="hljs-literal">nil</span>, <span class="hljs-built_in">len</span>(v)即为零<br><br></code></pre></td></tr></table></figure>

<p><strong>来个栗子</strong></p>
<figure class="highlight go"><table><tr><td class="code"><pre><code class="hljs go"><span class="hljs-comment">// code_014_map_operator project main.go</span><br><span class="hljs-keyword">package</span> main<br> <br><span class="hljs-keyword">import</span> (<br>    <span class="hljs-string">&quot;fmt&quot;</span><br>)<br> <br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">DeleteMap</span><span class="hljs-params">(m <span class="hljs-keyword">map</span>[<span class="hljs-keyword">int</span>]<span class="hljs-keyword">string</span>, key <span class="hljs-keyword">int</span>)</span></span> &#123;<br>    <span class="hljs-built_in">delete</span>(m, key)<br>    <span class="hljs-keyword">for</span> k, v := <span class="hljs-keyword">range</span> m &#123;<br>        fmt.Printf(<span class="hljs-string">&quot;len(m)=%d, %d ----&gt; %s\n&quot;</span>, <span class="hljs-built_in">len</span>(m), k, v)<br>    &#125;<br>&#125;<br> <br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>    <span class="hljs-comment">//赋值--&gt;修改和追加</span><br>    m1 := <span class="hljs-keyword">map</span>[<span class="hljs-keyword">int</span>]<span class="hljs-keyword">string</span>&#123;<span class="hljs-number">1</span>: <span class="hljs-string">&quot;ck_god&quot;</span>, <span class="hljs-number">2</span>: <span class="hljs-string">&quot;god_girl&quot;</span>&#125;<br>    m1[<span class="hljs-number">1</span>] = <span class="hljs-string">&quot;xxx&quot;</span><br>    m1[<span class="hljs-number">3</span>] = <span class="hljs-string">&quot;lily&quot;</span> <span class="hljs-comment">//追加，go底层自动为map分配空间</span><br>    fmt.Println(m1)<br> <br>    m2 := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">map</span>[<span class="hljs-keyword">int</span>]<span class="hljs-keyword">string</span>, <span class="hljs-number">10</span>)<br>    m2[<span class="hljs-number">0</span>] = <span class="hljs-string">&quot;aaa&quot;</span><br>    m2[<span class="hljs-number">1</span>] = <span class="hljs-string">&quot;bbb&quot;</span><br>    fmt.Println(m2)<br>    fmt.Println(m2[<span class="hljs-number">0</span>], m2[<span class="hljs-number">1</span>])<br>    fmt.Println(<span class="hljs-string">&quot;&quot;</span>)<br> <br>    <span class="hljs-comment">//遍历</span><br>    m3 := <span class="hljs-keyword">map</span>[<span class="hljs-keyword">int</span>]<span class="hljs-keyword">string</span>&#123;<span class="hljs-number">1</span>: <span class="hljs-string">&quot;ck_god&quot;</span>, <span class="hljs-number">2</span>: <span class="hljs-string">&quot;god_girl&quot;</span>&#125;<br>    <span class="hljs-keyword">for</span> k, v := <span class="hljs-keyword">range</span> m3 &#123;<br>        fmt.Printf(<span class="hljs-string">&quot;%d---&gt;&gt;&gt;%s\n&quot;</span>, k, v)<br>    &#125;<br> <br>    <span class="hljs-keyword">for</span> k := <span class="hljs-keyword">range</span> m3 &#123;<br>        fmt.Printf(<span class="hljs-string">&quot;%d---&gt;%s\n&quot;</span>, k, m3[k])<br>    &#125;<br>    fmt.Println(<span class="hljs-string">&quot;&quot;</span>)<br> <br>    <span class="hljs-comment">//获取map的值</span><br>    value, ok := m3[<span class="hljs-number">1</span>]<br>    fmt.Println(<span class="hljs-string">&quot;value = &quot;</span>, value, <span class="hljs-string">&quot;, ok = &quot;</span>, ok)<br> <br>    value2, ok2 := m3[<span class="hljs-number">3</span>]<br>    fmt.Println(<span class="hljs-string">&quot;value2 = &quot;</span>, value2, <span class="hljs-string">&quot;, ok2 = &quot;</span>, ok2)<br>    fmt.Println(<span class="hljs-string">&quot;&quot;</span>)<br> <br>    <span class="hljs-comment">//删除</span><br>    m4 := <span class="hljs-keyword">map</span>[<span class="hljs-keyword">int</span>]<span class="hljs-keyword">string</span>&#123;<span class="hljs-number">1</span>: <span class="hljs-string">&quot;ck_god&quot;</span>, <span class="hljs-number">2</span>: <span class="hljs-string">&quot;god_girl&quot;</span>&#125;<br>    <span class="hljs-built_in">delete</span>(m4, <span class="hljs-number">2</span>) <span class="hljs-comment">//删除key值为2的map</span><br>    <span class="hljs-keyword">for</span> k, v := <span class="hljs-keyword">range</span> m4 &#123;<br>        fmt.Printf(<span class="hljs-string">&quot;%d---&gt;%s\n&quot;</span>, k, v)<br>    &#125;<br>    fmt.Println(<span class="hljs-string">&quot;&quot;</span>)<br> <br>    <span class="hljs-comment">//map作为参数传递</span><br>    <span class="hljs-comment">//在函数间传递映射并不会制造出该映射的一个副本，不是值传递，而是引用传递：</span><br>    m := <span class="hljs-keyword">map</span>[<span class="hljs-keyword">int</span>]<span class="hljs-keyword">string</span>&#123;<span class="hljs-number">1</span>: <span class="hljs-string">&quot;ck_god&quot;</span>, <span class="hljs-number">2</span>: <span class="hljs-string">&quot;god_girl&quot;</span>, <span class="hljs-number">3</span>: <span class="hljs-string">&quot;girl_angle&quot;</span>&#125;<br> <br>    DeleteMap(m, <span class="hljs-number">3</span>)<br>    <span class="hljs-keyword">for</span> k, v := <span class="hljs-keyword">range</span> m &#123;<br>        fmt.Printf(<span class="hljs-string">&quot;len(m)=%d, %d ----&gt; %s\n&quot;</span>, <span class="hljs-built_in">len</span>(m), k, v)<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="4、利用map和list实现有序map"><a href="#4、利用map和list实现有序map" class="headerlink" title="4、利用map和list实现有序map"></a>4、利用map和list实现有序map</h3><figure class="highlight gauss"><table><tr><td class="code"><pre><code class="hljs gauss"><span class="hljs-built_in">type</span> MapList <span class="hljs-keyword">struct</span> &#123;<br>    <span class="hljs-comment">//map 映射到list的元素中</span><br>    dataMap	map[<span class="hljs-keyword">string</span>]*list.Element<br><br>    <span class="hljs-built_in">dataList</span>	*list.List<br>&#125;<br><br></code></pre></td></tr></table></figure>
<p>这个实现方法的主要的方法是用空间换取时间。<br>通过list 和 map 两种数据结构，保存相同的一份数据。<br><strong>list 用来做顺序遍历，map 用来做查找，删除操作。</strong></p>
<p><strong>这个栗子，遇到了关于接口的知识，如果你对接口不是很了解，这一部分代码可能看起来有点凌乱</strong></p>
<p>为了把对象保存到 map中，我们还需要定义一个接口</p>
<figure class="highlight elm"><table><tr><td class="code"><pre><code class="hljs elm"><span class="hljs-keyword">type</span> <span class="hljs-type">Keyer</span> interface &#123;<br>    <span class="hljs-type">GetKey</span>() string<br>&#125;<br></code></pre></td></tr></table></figure>
<p><strong>在进入下面的栗子之前，为了你更好的理解 我建议先看一下这点关于接口的例子</strong></p>
<figure class="highlight go"><table><tr><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> 	<span class="hljs-string">&quot;fmt&quot;</span><br><br><span class="hljs-keyword">type</span> IAnimal <span class="hljs-keyword">interface</span> &#123;<br><br>	Run()<br><br>&#125;<br><span class="hljs-keyword">type</span> Animal <span class="hljs-keyword">struct</span>&#123;&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(a *Animal)</span> <span class="hljs-title">Escape</span><span class="hljs-params">(ianimal IAnimal)</span></span> &#123;<br><br>	ianimal.Run()<br><br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(a *Animal)</span> <span class="hljs-title">Run</span><span class="hljs-params">()</span></span> &#123;<br><br>	fmt.Printf(<span class="hljs-string">&quot;Animal Run.\n&quot;</span>)<br>&#125;<br><br><span class="hljs-keyword">type</span> Dog <span class="hljs-keyword">struct</span> &#123;<br><br>	s Animal<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(d *Dog)</span> <span class="hljs-title">Run</span><span class="hljs-params">()</span></span> &#123;<br><br>	fmt.Printf(<span class="hljs-string">&quot;Dog Run.\n&quot;</span>)<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br><br>	dog := &amp;Dog&#123;&#125;<br>	dog.s.Escape(dog) <span class="hljs-comment">//触发 Dog Run</span><br>	ad:=&amp;Animal&#123;&#125;<br>	ad.Escape(ad)<span class="hljs-comment">//触发 Animal Run</span><br><br>&#125;<br></code></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> (<br>	<span class="hljs-string">&quot;container/list&quot;</span><br>	<span class="hljs-string">&quot;fmt&quot;</span><br>)<br><span class="hljs-comment">//我觉得这里的接口 实现的意义不大  因为这个行为只有一个 没有共同性基础可以提取  </span><br><span class="hljs-comment">//接口是定义一类行为的规范  而我这里只有一种行为 那我还要个接口干啥  一个就是一类 那就不用了  </span><br><span class="hljs-comment">//接口最好适用于两个以上存在重复部分的行为</span><br><span class="hljs-comment">//</span><br><span class="hljs-comment">//定义了一个接口 用于后面实现</span><br><span class="hljs-keyword">type</span> Keyer <span class="hljs-keyword">interface</span> &#123;<br>	GetKey() <span class="hljs-keyword">string</span><br>&#125;<br><br><span class="hljs-keyword">type</span> MapList <span class="hljs-keyword">struct</span> &#123;<br>	dataMap  <span class="hljs-keyword">map</span>[<span class="hljs-keyword">string</span>]*list.Element<br>	dataList *list.List<br>&#125;<br><br><span class="hljs-keyword">type</span> Elements <span class="hljs-keyword">struct</span> &#123;<br>	value <span class="hljs-keyword">string</span><br>&#125;<br><br><span class="hljs-comment">//list的每个元素实现了这个接口  通过接口就可以将自己的key值返回  这里的key值和value是相等的</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(e Elements)</span> <span class="hljs-title">GetKey</span><span class="hljs-params">()</span> <span class="hljs-title">string</span></span> &#123;<br>	<span class="hljs-keyword">return</span> e.value<br>&#125;<br><br><span class="hljs-comment">//初始化maplist  类似于java的构造方法</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">NewMapList</span><span class="hljs-params">()</span> *<span class="hljs-title">MapList</span></span> &#123;<br>	<span class="hljs-keyword">return</span> &amp;MapList&#123;<br>		dataMap:  <span class="hljs-built_in">make</span>(<span class="hljs-keyword">map</span>[<span class="hljs-keyword">string</span>]*list.Element),<br>		dataList: list.New(),<br>	&#125;<br>&#125;<br><br><span class="hljs-comment">//根据key值查找是否存在 </span><br><span class="hljs-comment">//将keyer()作为接口传递进去  然后mapList实现了此接口，因此可以随时调用getKey()</span><br><span class="hljs-comment">//以下的一样</span><br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(mapList *MapList)</span> <span class="hljs-title">Exists</span><span class="hljs-params">(data Keyer)</span> <span class="hljs-title">bool</span></span> &#123;<br>	_, exists := mapList.dataMap[<span class="hljs-keyword">string</span>(data.GetKey())]<br>	<span class="hljs-keyword">return</span> exists<br>&#125;<br><br><span class="hljs-comment">//添加数据  一：加入链表  二：添加映射</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(mapList *MapList)</span> <span class="hljs-title">Push</span><span class="hljs-params">(data Keyer)</span> <span class="hljs-title">bool</span></span> &#123;<br>    <span class="hljs-comment">//</span><br>	<span class="hljs-keyword">if</span> mapList.Exists(data) &#123;<br>		<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span><br>	&#125;<br>	elem := mapList.dataList.PushBack(data)<br>	mapList.dataMap[data.GetKey()] = elem<br>	<span class="hljs-keyword">return</span> <span class="hljs-literal">true</span><br>&#125;<br><br><span class="hljs-comment">//删除  一；从链表中删除  二 ：从映射中删除</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(mapList *MapList)</span> <span class="hljs-title">Remove</span><span class="hljs-params">(data Keyer)</span></span> &#123;<br>	<span class="hljs-keyword">if</span> !mapList.Exists(data) &#123;<br>		<span class="hljs-keyword">return</span><br>	&#125;<br>	mapList.dataList.Remove(mapList.dataMap[data.GetKey()])<br>	<span class="hljs-built_in">delete</span>(mapList.dataMap, data.GetKey())<br>&#125;<br><br><span class="hljs-comment">//计算长度</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(mapList *MapList)</span> <span class="hljs-title">Size</span><span class="hljs-params">()</span> <span class="hljs-title">int</span></span> &#123;<br>	<span class="hljs-keyword">return</span> mapList.dataList.Len()<br>&#125;<br><br><br><span class="hljs-comment">//遍历链表  拿到链表 首字母</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(mapList *MapList)</span> <span class="hljs-title">Walk</span><span class="hljs-params">(cb <span class="hljs-keyword">func</span>(data Keyer)</span>)</span> &#123;<br>	<span class="hljs-keyword">for</span> elem := mapList.dataList.Front(); elem != <span class="hljs-literal">nil</span>; elem = elem.Next() &#123;<br>		cb(elem.Value.(Keyer))<span class="hljs-comment">//将elem.Value转为Keyer类型</span><br>	&#125;<br>&#125;<br><br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>	fmt.Println(<span class="hljs-string">&quot;Starting test...&quot;</span>)<br>	ml := NewMapList()<br>	<span class="hljs-keyword">var</span> a, b, c Keyer<br>	a = &amp;Elements&#123;<span class="hljs-string">&quot;Alice&quot;</span>&#125;<br>	b = &amp;Elements&#123;<span class="hljs-string">&quot;Bob&quot;</span>&#125;<br>	c = &amp;Elements&#123;<span class="hljs-string">&quot;Conrad&quot;</span>&#125;<br>	ml.Push(a)<br>	ml.Push(b)<br>	ml.Push(c)<br>	cb := <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(data Keyer)</span></span> &#123;<br>		fmt.Println(ml.dataMap[data.GetKey()].Value.(*Elements).value)<br>	&#125;<br>	fmt.Println(<span class="hljs-string">&quot;Print elements in the order of pushing:&quot;</span>)<br>	ml.Walk(cb)<br>	fmt.Printf(<span class="hljs-string">&quot;Size of MapList: %d \n&quot;</span>, ml.Size())<br>	ml.Remove(b)<br>	fmt.Println(<span class="hljs-string">&quot;After removing b:&quot;</span>)<br>	ml.Walk(cb)<br>	fmt.Printf(<span class="hljs-string">&quot;Size of MapList: %d \n&quot;</span>, ml.Size())<br>&#125;<br><br></code></pre></td></tr></table></figure>
<p>输出结果</p>
<figure class="highlight vim"><table><tr><td class="code"><pre><code class="hljs vim">Starting test...<br><span class="hljs-keyword">Print</span> elements in the order of pushin<span class="hljs-variable">g:</span><br>Alice<br>Bob<br>Conrad<br>Size of MapLis<span class="hljs-variable">t:</span> <span class="hljs-number">3</span> <br>After removing <span class="hljs-variable">b:</span><br>Alice<br>Conrad<br>Size of MapLis<span class="hljs-variable">t:</span> <span class="hljs-number">2</span> <br><br></code></pre></td></tr></table></figure>

<p><strong>结论：</strong><br>优点：<br>红黑树的插入、删除、查找的复杂度都是 O(logn), 而这个实现插入查找删除的复杂度都是 O(1), 可以说是一种非常好的数据结构。</p>
<p>缺点：<br>使用了两个数据结构，空间占用稍微大了一点。但是和树的实现比，这个占用也不算非常大。</p>
<p><strong>我代码中的注释希望能帮到你理解</strong></p>
<p><em><strong>以上就是本次内容，希望能对你有所帮助！！！</strong></em></p>

    </div>
</div>
<style>
    #noneimg img {
        display: none;
        z-index: 109;
        width: 600px !important;
        border-radius: 0px;
        position: fixed;
        box-shadow: 0 0 0px #c3c3c300 !important;
        left: 0;
        top: 0;
        right: 0;
        bottom: 0;
        margin: auto !important;
    }

    @media screen and (max-width:600px) {
        #noneimg img {
            width: 88%
        }
    }
</style>
<script>
    $(function () { $('#article').click(function (e) { if (e.target.tagName == "IMG") { if ($('#nonediv').length == 0) { let MImg = `<div id='noneimg'><img src='${e.target.currentSrc}'></div>`; let MDiv = "<div id='nonediv' style='cursor: pointer;display: none; position: fixed;left: 0;top: 0; right: 0;bottom: 0;background-color: #333;opacity:0.5;z-index: 108;'></div>"; $('#article').append(MDiv); $('#article').append(MImg); $("#nonediv").fadeIn("slow"); $("#noneimg img").fadeIn("slow") } } else { if ($('#nonediv').length !== 0) { $("#noneimg ").fadeOut("slow"); $("#nonediv").fadeOut("slow"); setTimeout(function () { $('#nonediv').remove(); $('#noneimg').remove() }, 500) } } }); $('.article-content').addClass('content-move') });
</script>
<div class="Last-Next">
    
    <a href="/2021/05/31/golang%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/">
        <div class="last">
            <span>上一篇</span>
            <p>golang的基本数据类型</p>
        </div>
    </a>
    

    
    <a href="/2021/05/31/go%E5%AE%9E%E7%8E%B0%E5%B0%8F%E9%A1%B6%E5%A0%86%E5%A4%A7%E9%A1%B6%E5%A0%86/">
        <div class="next">
            <span>下一篇</span>
            <p>go实现小顶堆大顶堆</p>
        </div>
    </a>
    
</div>
		
<link rel="stylesheet" href="/css/food.css">

<div class="footer">
	<div class="Copyright">
		©2022 By Russshare. 主题：<a
			style="text-decoration: none;display: contents; color: #898F9F;"
			target="_blank" rel="noopener" href="https://github.com/qiaobug/hexo-theme-quiet">Quiet</a>
	</div>
	<div class="contact">
		
		<a target="_blank" rel="noopener" href="https://github.com/RiddleGo">
			<img src="https://cdn.jsdelivr.net/gh/duogongneng/MyBlogImg/imggithub.png" alt="Quiet主题">
		</a>
		
	</div>
</div>

<script src="/js/jquery.min.js"></script>


<script src="/js/gotop.js"></script>


<style type="text/css">
    @media screen and (min-width: 600px) {
        .goTop>span {
            display: block;
            border-radius: 50%;
            width: 66px;
            height: 66px;
            cursor: pointer;
            opacity: 0.8;
            background: rgba(18, 24, 58, 0.06);
            text-align: center;
            border: 1px solid rgba(18, 24, 58, 0.06);

            transition: border .5s;
            -moz-transition: border .5s;
            /* Firefox 4 */
            -webkit-transition: border .5s;
            /* Safari 和 Chrome */
            -o-transition: border .5s;
            /* Opera */
        }

        .goTop>span:hover {
            border: 1px solid #6680B3;
        }


        .goTop {
            position: fixed;
            right: 30px;
            bottom: 80px;
        }

        .goTop>span>svg {
            width: 30px;
            height: 30px;
            margin-top: 17.5px;
            opacity: 0.7;
        }

    }

    @media screen and (max-width: 600px) {
        .goTop {
            display: none;
        }
    }
</style>
<div class="goTop" id="js-go_top">
    <span>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
            <g>
                <path d="M13 12v8h-2v-8H4l8-8 8 8z"></path>
            </g>
        </svg>
    </span>
</div>
<script>
    $('#js-go_top').gotoTop({ offset: 500, speed: 300, animationShow: { 'transform': 'translate(0,0)', 'transition': 'transform .5s ease-in-out' }, animationHide: { 'transform': 'translate(100px,0)', 'transition': 'transform .5s ease-in-out' } });
</script>
<script>
	console.log('\n %c Hexo-Quiet 主题 %c https://github.com/QiaoBug/hexo-theme-quiet \n', 'color: #fadfa3; background: #030307; padding:5px 0;', 'background: #fadfa3; padding:5px 0;')
</script>
	</body>

</html>