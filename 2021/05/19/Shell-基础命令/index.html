<!DOCTYPE html>
<html>

	<head>
		
<title>Shell 基础命令-Russshare</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" type="image/x-icon" href="/image/favicon.ico">


<meta name="keywords" content="shell,">
<meta name="description" content="">


<script src="/js/jquery.min.js"></script>



<!-- Baidu Analytics -->
<script defer>
    var _hmt = _hmt || [];
    (function () {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?4b5fe1472f22fa";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
    })();
</script>


	<meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="/atom.xml" title="RiddleGo" type="application/atom+xml">
</head>

	<body>
		
<link rel="stylesheet" href="/css/page.css">


<link rel="stylesheet" href="/css/page_cente.css">


<link rel="stylesheet" href="/css/atom-one-dark.css">


<link rel="stylesheet" href="/css/header.css">

	<div class="header">
		<div class="header-top">
			<div class="h-left">
				<a href="/">
					<img src="/image/logo.png" alt="Quiet">
				</a>
			</div>
			<div class="h-right">
				<ul>
					
						
								<li>
									<a href="/">
										HOME
									</a>
									<span class="dot"></span>
								</li>
								
									
						
								<li>
									<a href="/archives">
										ARCHIVE
									</a>
									<span class="dot"></span>
								</li>
								
									
						
								<li>
									<a href="/categories">
										CATEGORIES
									</a>
									<span class="dot"></span>
								</li>
								
									
						
								<li>
									<a href="/tags">
										TAGS
									</a>
									<span class="dot"></span>
								</li>
								
									
						
								<li>
									<a href="/links">
										LINKS
									</a>
									<span class="dot"></span>
								</li>
								
									
						
								<li>
									<a href="/about">
										ABOUT
									</a>
									<span class="dot"></span>
								</li>
								
									
				</ul>
			</div>
			<div class="h-right-close">
				<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
					<path fill="none" d="M0 0h24v24H0z" />
					<path d="M3 4h18v2H3V4zm0 7h18v2H3v-2zm0 7h18v2H3v-2z" fill="rgba(68,68,68,1)" />
				</svg>
			</div>
		</div>
	</div>
	<div class="sidebar">
    <div class="topo">
        <h2>Russshare</h2>
    </div>
    <ul>
        
        <li>
            <a href="/">HOME</a>
        </li>
        
        <li>
            <a href="/archives">ARCHIVE</a>
        </li>
        
        <li>
            <a href="/categories">CATEGORIES</a>
        </li>
        
        <li>
            <a href="/tags">TAGS</a>
        </li>
        
        <li>
            <a href="/links">LINKS</a>
        </li>
        
        <li>
            <a href="/about">ABOUT</a>
        </li>
        
    </ul>
    <div class="my_foot">
        
        <a target="_blank" rel="noopener" href="https://github.com/RiddleGo">
            <img src="https://cdn.jsdelivr.net/gh/duogongneng/MyBlogImg/imggithub.png" alt="Quiet主题">
        </a>
        
    </div>
</div>
<div class='shelter'
    style='cursor: pointer;display: none; position: fixed;left: 0;top: 0; right: 0;bottom: 0;background-color: #333;opacity:0.5;z-index: 108;'>
</div>
<style>
    .sidebar {
        width: 0;
        height: 100%;
        position: fixed;
        top: 0;
        right: 0;
        bottom: 0;
        background: #fff;
        z-index: 999;
        text-align: center;
        box-shadow: -6px 0 20px rgba(98, 94, 94, .815)
    }

    .topo {
        width: 100%;
        height: 200px;
        background: url(https://api.ixiaowai.cn/gqapi/gqapi.php) no-repeat;
        background-size: 100% 100%;
        position: relative;
        display: flex;
        align-items: flex-end
    }

    .topo h2 {
        color: #fff;
        z-index: 1;
        position: relative;
        margin: 0 0 10px 10px;
        font-size: 1.2em;
        box-sizing: border-box
    }

    .topo:before {
        content: '';
        background-image: url(/image/pattern.png);
        background-repeat: repeat;
        height: 100%;
        left: 0;
        position: absolute;
        top: 0;
        width: 100%;
        z-index: 1
    }

    .sidebar ul {
        width: 100%;
        margin-top: 50px
    }

    .sidebar ul li {
        height: 50px;
        list-style: none;
        font-size: 1.2em;
        text-align: right;
        margin-right: 10px
    }

    .sidebar ul li a {
        display: grid;
        color: #5d606a;
        text-overflow: ellipsis;
        width: 100%;
        text-decoration: none
    }

    .my_foot {
        width: 100%;
        padding: 10px;
        margin-bottom: 10px;
        position: absolute;
        bottom: 0
    }

    .my_foot a {
        text-decoration: none;
        margin-right: 10px;
        display: inline-block
    }

    .my_foot a img {
        width: 30px;
        height: 30px
    }
</style>

<script>
    $(function () { $('.h-right-close>svg').click(function () { $('.sidebar').animate({ width: "66%" }, 500); $('.shelter').fadeIn("slow") }); $('.shelter').click(function (e) { $('.sidebar').animate({ width: "0" }, 500); $('.shelter').fadeOut("slow") }) })
</script>
		<script>
			$(function () { $(window).scroll(function () { if ($(document).scrollTop() > 100) { $(".header-top").removeClass("header-move2"); $('.header-top').addClass('header-move1') } else { $(".header-top").removeClass("header-move1"); $('.header-top').addClass('header-move2') } }) });
		</script>
<div class="header-bg ">
    <div class="bg-content">
        <ul class="tag">
            
            
            <li><a href="/tags/shell">shell</a></li>
            
            
        </ul>
        <h1>Shell 基础命令</h1>
        <div class="article-info">
            <div class="article-author">
                
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20">
                    <g>
                        <path fill="#12183A"
                            d="M6.187 15.265A6.47 6.47 0 0 0 10 16.5a6.47 6.47 0 0 0 3.813-1.235A4.99 4.99 0 0 0 10 13.5a4.99 4.99 0 0 0-3.813 1.765zM5.082 14.25A6.485 6.485 0 0 1 10 12c1.965 0 3.726.872 4.918 2.25a6.5 6.5 0 1 0-9.836 0zM10 18a8 8 0 1 1 0-16 8 8 0 0 1 0 16zm0-7a3 3 0 1 1 0-6 3 3 0 0 1 0 6zm0-1.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3z">
                        </path>
                    </g>
                </svg>
                
                <span> <a href="">Russshare</a></span>
                <p>2021-05-19 16:21:29</p>
            </div>
        </div>
    </div>
</div>
<div class="article-content">
    <div id="article" class="content">
        <h1 id="前言："><a href="#前言：" class="headerlink" title="前言："></a>前言：</h1><p> 最近在看一个开源的工程，发现部署使用的脚本自动部署。自己看的一脸懵逼，于是在b站找了尚硅谷的视频，花了两个小时把整个文档笔记过了一遍，看视频太花费时间啦。<br> 最后顺便把这个笔记贴了出来，希望以后查询的时候方便，瑞思拜尚硅谷。</p>
<h1 id="第1章-Shell概述"><a href="#第1章-Shell概述" class="headerlink" title="第1章 Shell概述"></a>第1章 Shell概述</h1><p>大数据程序员为什么要学习Shell呢？</p>
<p>1）需要看懂运维人员编写的Shell程序。</p>
<p>2）偶尔会编写一些简单Shell程序来管理集群、提高开发效率。</p>
<h1 id="第2章-Shell解析器"><a href="#第2章-Shell解析器" class="headerlink" title="第2章 Shell解析器"></a>第2章 Shell解析器</h1><p>（1）Linux提供的Shell解析器有：</p>
<blockquote>
<p>  [atguigu@hadoop101 ~]$ cat /etc/shells</p>
</blockquote>
<blockquote>
<p>  /bin/sh</p>
</blockquote>
<blockquote>
<p>  /bin/bash</p>
</blockquote>
<blockquote>
<p>  /sbin/nologin</p>
</blockquote>
<blockquote>
<p>  /bin/dash</p>
</blockquote>
<blockquote>
<p>  /bin/tcsh</p>
</blockquote>
<blockquote>
<p>  /bin/csh</p>
</blockquote>
<p>（2）bash和sh的关系</p>
<blockquote>
<p>  [atguigu@hadoop101 bin]$ ll | grep bash</p>
</blockquote>
<blockquote>
<p>  -rwxr-xr-x. 1 root root 941880 5月 11 2016 bash</p>
</blockquote>
<blockquote>
<p>  lrwxrwxrwx. 1 root root 4 5月 27 2017 sh -&gt; bash</p>
</blockquote>
<p>（3）Centos默认的解析器是bash</p>
<blockquote>
<p>  [atguigu@hadoop102 bin]$ echo $SHELL</p>
</blockquote>
<blockquote>
<p>  /bin/bash</p>
</blockquote>
<h1 id="第3章-Shell脚本入门"><a href="#第3章-Shell脚本入门" class="headerlink" title="第3章 Shell脚本入门"></a>第3章 Shell脚本入门</h1><p>1．脚本格式</p>
<p>脚本以#!/bin/bash开头（指定解析器）</p>
<p>2．第一个Shell脚本：helloworld</p>
<p>（1）需求：创建一个Shell脚本，输出helloworld</p>
<p>（2）案例实操：</p>
<blockquote>
<p>  [atguigu@hadoop101 datas]$ touch helloworld.sh</p>
</blockquote>
<blockquote>
<p>  [atguigu@hadoop101 datas]$ vi helloworld.sh</p>
</blockquote>
<blockquote>
<p>  在helloworld.sh中输入如下内容</p>
</blockquote>
<blockquote>
<p>  #!/bin/bash</p>
</blockquote>
<blockquote>
<p>  echo “helloworld”</p>
</blockquote>
<p>（3）脚本的常用执行方式</p>
<p>第一种：采用bash或sh+脚本的相对路径或绝对路径（不用赋予脚本+x权限）</p>
<p>sh+脚本的相对路径</p>
<blockquote>
<p>  [atguigu@hadoop101 datas]$ sh helloworld.sh</p>
</blockquote>
<blockquote>
<p>  Helloworld</p>
</blockquote>
<p>sh+脚本的绝对路径</p>
<blockquote>
<p>  [atguigu@hadoop101 datas]$ sh /home/atguigu/datas/helloworld.sh</p>
</blockquote>
<blockquote>
<p>  helloworld</p>
</blockquote>
<p>bash+脚本的相对路径</p>
<blockquote>
<p>  [atguigu@hadoop101 datas]$ bash helloworld.sh</p>
</blockquote>
<blockquote>
<p>  Helloworld</p>
</blockquote>
<p>bash+脚本的绝对路径</p>
<blockquote>
<p>  [atguigu@hadoop101 datas]$ bash /home/atguigu/datas/helloworld.sh</p>
</blockquote>
<blockquote>
<p>  Helloworld</p>
</blockquote>
<blockquote>
<p>  第二种：采用输入脚本的绝对路径或相对路径执行脚本（必须具有可执行权限+x）</p>
</blockquote>
<p>（a）首先要赋予helloworld.sh 脚本的+x权限</p>
<blockquote>
<p>  [atguigu@hadoop101 datas]$ chmod 777 helloworld.sh</p>
</blockquote>
<p>（b）执行脚本</p>
<blockquote>
<p>  相对路径</p>
</blockquote>
<blockquote>
<p>  [atguigu@hadoop101 datas]$ ./helloworld.sh</p>
</blockquote>
<blockquote>
<p>  Helloworld</p>
</blockquote>
<blockquote>
<p>  绝对路径</p>
</blockquote>
<blockquote>
<p>  [atguigu@hadoop101 datas]$ /home/atguigu/datas/helloworld.sh</p>
</blockquote>
<blockquote>
<p>  Helloworld</p>
</blockquote>
<p>注意：第一种执行方法，本质是bash解析器帮你执行脚本，所以脚本本身不需要执行权限。第二种执行方法，本质是脚本需要自己执行，所以需要执行权限。</p>
<p>3．第二个Shell脚本：多命令处理</p>
<p>（1）需求：</p>
<blockquote>
<p>  在/home/atguigu/目录下创建一个banzhang.txt,在banzhang.txt文件中增加“I love<br>  cls”。</p>
</blockquote>
<p>（2）案例实操：</p>
<blockquote>
<p>  [atguigu@hadoop101 datas]$ touch batch.sh</p>
</blockquote>
<blockquote>
<p>  [atguigu@hadoop101 datas]$ vi batch.sh</p>
</blockquote>
<blockquote>
<p>  在batch.sh中输入如下内容</p>
</blockquote>
<blockquote>
<p>  #!/bin/bash</p>
</blockquote>
<blockquote>
<p>  cd /home/atguigu</p>
</blockquote>
<blockquote>
<p>  touch cls.txt</p>
</blockquote>
<blockquote>
<p>  echo “I love cls” &gt;&gt;cls.txt</p>
</blockquote>
<h1 id="第4章-Shell中的变量"><a href="#第4章-Shell中的变量" class="headerlink" title="第4章 Shell中的变量"></a>第4章 Shell中的变量</h1><h2 id="4-1-系统变量"><a href="#4-1-系统变量" class="headerlink" title="4.1 系统变量"></a>4.1 系统变量</h2><p>1. 常用系统变量</p>
<p>$HOME、$PWD、$SHELL、$USER等</p>
<p>2．案例实操</p>
<p>（1）查看系统变量的值</p>
<blockquote>
<p>  [atguigu@hadoop101 datas]$ echo $HOME</p>
</blockquote>
<blockquote>
<p>  /home/atguigu</p>
</blockquote>
<p>（2）显示当前Shell中所有变量：set</p>
<blockquote>
<p>  [atguigu@hadoop101 datas]$ set</p>
</blockquote>
<blockquote>
<p>  BASH=/bin/bash</p>
</blockquote>
<blockquote>
<p>  BASH_ALIASES=()</p>
</blockquote>
<blockquote>
<p>  BASH_ARGC=()</p>
</blockquote>
<blockquote>
<p>  BASH_ARGV=()</p>
</blockquote>
<h2 id="4-2-自定义变量"><a href="#4-2-自定义变量" class="headerlink" title="4.2 自定义变量"></a>4.2 自定义变量</h2><p>1．基本语法</p>
<p>（1）定义变量：变量=值</p>
<p>（2）撤销变量：unset 变量</p>
<p>（3）声明静态变量：readonly变量，注意：不能unset</p>
<p>2．变量定义规则</p>
<p>（1）变量名称可以由字母、数字和下划线组成，但是不能以数字开头，环境变量名建议大写。</p>
<p>（2）等号两侧不能有空格</p>
<p>（3）在bash中，变量默认类型都是字符串类型，无法直接进行数值运算。</p>
<p>（4）变量的值如果有空格，需要使用双引号或单引号括起来。</p>
<p>3．案例实操</p>
<p>（1）定义变量A</p>
<blockquote>
<p>  [atguigu@hadoop101 datas]$ A=5</p>
</blockquote>
<blockquote>
<p>  [atguigu@hadoop101 datas]$ echo $A</p>
</blockquote>
<blockquote>
<p>  5</p>
</blockquote>
<p>（2）给变量A重新赋值</p>
<blockquote>
<p>  [atguigu@hadoop101 datas]$ A=8</p>
</blockquote>
<blockquote>
<p>  [atguigu@hadoop101 datas]$ echo $A</p>
</blockquote>
<blockquote>
<p>  8</p>
</blockquote>
<p>（3）撤销变量A</p>
<blockquote>
<p>  [atguigu@hadoop101 datas]$ unset A</p>
</blockquote>
<blockquote>
<p>  [atguigu@hadoop101 datas]$ echo $A</p>
</blockquote>
<p>（4）声明静态的变量B=2，不能unset</p>
<blockquote>
<p>  [atguigu@hadoop101 datas]$ readonly B=2</p>
</blockquote>
<blockquote>
<p>  [atguigu@hadoop101 datas]$ echo $B</p>
</blockquote>
<blockquote>
<p>  2</p>
</blockquote>
<blockquote>
<p>  [atguigu@hadoop101 datas]$ B=9</p>
</blockquote>
<blockquote>
<p>  -bash: B: readonly variable</p>
</blockquote>
<p>（5）在bash中，变量默认类型都是字符串类型，无法直接进行数值运算</p>
<blockquote>
<p>  [atguigu@hadoop102 ~]$ C=1+2</p>
</blockquote>
<blockquote>
<p>  [atguigu@hadoop102 ~]$ echo $C</p>
</blockquote>
<blockquote>
<p>  1+2</p>
</blockquote>
<p>（6）变量的值如果有空格，需要使用双引号或单引号括起来</p>
<blockquote>
<p>  [atguigu@hadoop102 ~]$ D=I love banzhang</p>
</blockquote>
<blockquote>
<p>  -bash: world: command not found</p>
</blockquote>
<blockquote>
<p>  [atguigu@hadoop102 ~]$ D=”I love banzhang”</p>
</blockquote>
<blockquote>
<p>  [atguigu@hadoop102 ~]$ echo $A</p>
</blockquote>
<blockquote>
<p>  I love banzhang</p>
</blockquote>
<p>（7）可把变量提升为全局环境变量，可供其他Shell程序使用</p>
<blockquote>
<p>  export 变量名</p>
</blockquote>
<blockquote>
<p>  [atguigu@hadoop101 datas]$ vim helloworld.sh</p>
</blockquote>
<blockquote>
<p>  在helloworld.sh文件中增加echo $B</p>
</blockquote>
<blockquote>
<p>  #!/bin/bash</p>
</blockquote>
<blockquote>
<p>  echo “helloworld”</p>
</blockquote>
<blockquote>
<p>  echo $B</p>
</blockquote>
<blockquote>
<p>  [atguigu@hadoop101 datas]$ ./helloworld.sh</p>
</blockquote>
<blockquote>
<p>  Helloworld</p>
</blockquote>
<blockquote>
<p>  发现并没有打印输出变量B的值。</p>
</blockquote>
<blockquote>
<p>  [atguigu@hadoop101 datas]$ export B</p>
</blockquote>
<blockquote>
<p>  [atguigu@hadoop101 datas]$ ./helloworld.sh</p>
</blockquote>
<blockquote>
<p>  helloworld</p>
</blockquote>
<blockquote>
<p>  2</p>
</blockquote>
<h2 id="4-3-特殊变量：-n"><a href="#4-3-特殊变量：-n" class="headerlink" title="4.3 特殊变量：$n"></a>4.3 特殊变量：$n</h2><p>1．基本语法</p>
<p>$n<br>（功能描述：n为数字，$0代表该脚本名称，$1-$9代表第一到第九个参数，十以上的参数，十以上的参数需要用大括号包含，如${10}）</p>
<p>2．案例实操</p>
<p>（1）输出该脚本文件名称、输入参数1和输入参数2 的值</p>
<blockquote>
<p>  [atguigu@hadoop101 datas]$ touch parameter.sh</p>
</blockquote>
<blockquote>
<p>  [atguigu@hadoop101 datas]$ vim parameter.sh</p>
</blockquote>
<blockquote>
<p>  #!/bin/bash</p>
</blockquote>
<blockquote>
<p>  echo “$0 $1 $2”</p>
</blockquote>
<blockquote>
<p>  [atguigu@hadoop101 datas]$ chmod 777 parameter.sh</p>
</blockquote>
<blockquote>
<p>  [atguigu@hadoop101 datas]$ ./parameter.sh cls xz</p>
</blockquote>
<blockquote>
<p>  ./parameter.sh cls xz</p>
</blockquote>
<h2 id="4-4-特殊变量："><a href="#4-4-特殊变量：" class="headerlink" title="4.4 特殊变量：$#"></a>4.4 特殊变量：$#</h2><p>1．基本语法</p>
<p>$# （功能描述：获取所有输入参数个数，常用于循环）。</p>
<p>2．案例实操</p>
<p>（1）获取输入参数的个数</p>
<blockquote>
<p>  [atguigu@hadoop101 datas]$ vim parameter.sh</p>
</blockquote>
<blockquote>
<p>  #!/bin/bash</p>
</blockquote>
<blockquote>
<p>  echo “$0 $1 $2”</p>
</blockquote>
<blockquote>
<p>  echo $#</p>
</blockquote>
<blockquote>
<p>  [atguigu@hadoop101 datas]$ chmod 777 parameter.sh</p>
</blockquote>
<blockquote>
<p>  [atguigu@hadoop101 datas]$ ./parameter.sh cls xz</p>
</blockquote>
<blockquote>
<p>  parameter.sh cls xz</p>
</blockquote>
<blockquote>
<p>  2</p>
</blockquote>
<h2 id="4-5-特殊变量：-、"><a href="#4-5-特殊变量：-、" class="headerlink" title="4.5 特殊变量：$*、$@"></a>4.5 特殊变量：$*、$@</h2><p>1．基本语法</p>
<p>$* （功能描述：这个变量代表命令行中所有的参数，$*把所有的参数看成一个整体）</p>
<p>$@ （功能描述：这个变量也代表命令行中所有的参数，不过$@把每个参数区分对待）</p>
<p>2．案例实操</p>
<p>（1）打印输入的所有参数</p>
<blockquote>
<p>  [atguigu@hadoop101 datas]$ vim parameter.sh</p>
</blockquote>
<blockquote>
<p>  #!/bin/bash</p>
</blockquote>
<blockquote>
<p>  echo “$0 $1 $2”</p>
</blockquote>
<blockquote>
<p>  echo $#</p>
</blockquote>
<blockquote>
<p>  echo $*</p>
</blockquote>
<blockquote>
<p>  echo $@</p>
</blockquote>
<blockquote>
<p>  [atguigu@hadoop101 datas]$ bash parameter.sh 1 2 3</p>
</blockquote>
<blockquote>
<p>  parameter.sh 1 2</p>
</blockquote>
<blockquote>
<p>  3</p>
</blockquote>
<blockquote>
<p>  1 2 3</p>
</blockquote>
<blockquote>
<p>  1 2 3</p>
</blockquote>
<h2 id="4-6-特殊变量：-？"><a href="#4-6-特殊变量：-？" class="headerlink" title="4.6 特殊变量：$？"></a>4.6 特殊变量：$？</h2><p>1．基本语法</p>
<p>$？<br>（功能描述：最后一次执行的命令的返回状态。如果这个变量的值为0，证明上一个命令正确执行；如果这个变量的值为非0（具体是哪个数，由命令自己来决定），则证明上一个命令执行不正确了。）</p>
<p>2．案例实操</p>
<p>（1）判断helloworld.sh脚本是否正确执行</p>
<blockquote>
<p>  [atguigu@hadoop101 datas]$ ./helloworld.sh</p>
</blockquote>
<blockquote>
<p>  hello world</p>
</blockquote>
<blockquote>
<p>  [atguigu@hadoop101 datas]$ echo $?</p>
</blockquote>
<blockquote>
<p>  0</p>
</blockquote>
<h1 id="第5章-运算符"><a href="#第5章-运算符" class="headerlink" title="第5章 运算符"></a>第5章 运算符</h1><p>1．基本语法</p>
<p>（1）“$((运算式))”或“$[运算式]”</p>
<p>（2）expr + , - , \*, /, % 加，减，乘，除，取余</p>
<blockquote>
<p>  注意：expr运算符间要有空格</p>
</blockquote>
<p>2．案例实操：</p>
<p>（1）计算3+2的值</p>
<blockquote>
<p>  [atguigu@hadoop101 datas]$ expr 2 + 3</p>
</blockquote>
<blockquote>
<p>  5</p>
</blockquote>
<p>（2）计算3-2的值</p>
<blockquote>
<p>  [atguigu@hadoop101 datas]$ expr 3 - 2</p>
</blockquote>
<blockquote>
<p>  1</p>
</blockquote>
<p>（3）计算（2+3）X4的值</p>
<blockquote>
<p>  （a）expr一步完成计算</p>
</blockquote>
<blockquote>
<p>  [atguigu@hadoop101 datas]$ expr `expr 2 + 3` \* 4</p>
</blockquote>
<blockquote>
<p>  20</p>
</blockquote>
<blockquote>
<p>  （b）采用$[运算式]方式</p>
</blockquote>
<blockquote>
<p>  [atguigu@hadoop101 datas]# S=$[(2+3)*4]</p>
</blockquote>
<blockquote>
<p>  [atguigu@hadoop101 datas]# echo $S</p>
</blockquote>
<h1 id="第6章-条件判断"><a href="#第6章-条件判断" class="headerlink" title="第6章 条件判断"></a>第6章 条件判断</h1><p>1．基本语法</p>
<p>[ condition ]（注意condition前后要有空格）</p>
<p>注意：条件非空即为true，[ atguigu ]返回true，[] 返回false。</p>
<p>2. 常用判断条件</p>
<blockquote>
<p>  （1）两个整数之间比较</p>
</blockquote>
<blockquote>
<p>  = 字符串比较</p>
</blockquote>
<blockquote>
<p>  -lt 小于（less than） -le 小于等于（less equal）</p>
</blockquote>
<blockquote>
<p>  -eq 等于（equal） -gt 大于（greater than）</p>
</blockquote>
<blockquote>
<p>  -ge 大于等于（greater equal） -ne 不等于（Not equal）</p>
</blockquote>
<blockquote>
<p>  （2）按照文件权限进行判断</p>
</blockquote>
<blockquote>
<p>  -r 有读的权限（read） -w 有写的权限（write）</p>
</blockquote>
<blockquote>
<p>  -x 有执行的权限（execute）</p>
</blockquote>
<blockquote>
<p>  （3）按照文件类型进行判断</p>
</blockquote>
<blockquote>
<p>  -f 文件存在并且是一个常规的文件（file）</p>
</blockquote>
<blockquote>
<p>  -e 文件存在（existence） -d 文件存在并是一个目录（directory）</p>
</blockquote>
<p>3．案例实操</p>
<p>（1）23是否大于等于22</p>
<blockquote>
<p>  [atguigu@hadoop101 datas]$ [ 23 -ge 22 ]</p>
</blockquote>
<blockquote>
<p>  [atguigu@hadoop101 datas]$ echo $?</p>
</blockquote>
<blockquote>
<p>  0</p>
</blockquote>
<p>（2）helloworld.sh是否具有写权限</p>
<blockquote>
<p>  [atguigu@hadoop101 datas]$ [ -w helloworld.sh ]</p>
</blockquote>
<blockquote>
<p>  [atguigu@hadoop101 datas]$ echo $?</p>
</blockquote>
<blockquote>
<p>  0</p>
</blockquote>
<p>（3）/home/atguigu/cls.txt目录中的文件是否存在</p>
<blockquote>
<p>  [atguigu@hadoop101 datas]$ [ -e /home/atguigu/cls.txt ]</p>
</blockquote>
<blockquote>
<p>  [atguigu@hadoop101 datas]$ echo $?</p>
</blockquote>
<blockquote>
<p>  1</p>
</blockquote>
<p>（4）多条件判断（&amp;&amp; 表示前一条命令执行成功时，才执行后一条命令，||<br>表示上一条命令执行失败后，才执行下一条命令）</p>
<blockquote>
<p>  [atguigu@hadoop101 ~]$ [ condition ] &amp;&amp; echo OK || echo notok</p>
</blockquote>
<blockquote>
<p>  OK</p>
</blockquote>
<blockquote>
<p>  [atguigu@hadoop101 datas]$ [ condition ] &amp;&amp; [ ] || echo notok</p>
</blockquote>
<blockquote>
<p>  notok</p>
</blockquote>
<h1 id="第7章-流程控制（重点）"><a href="#第7章-流程控制（重点）" class="headerlink" title="第7章 流程控制（重点）"></a>第7章 流程控制（重点）</h1><h2 id="7-1-if-判断"><a href="#7-1-if-判断" class="headerlink" title="7.1 if 判断"></a>7.1 if 判断</h2><p>1．基本语法</p>
<blockquote>
<p>  if [ 条件判断式 ];then</p>
</blockquote>
<blockquote>
<p>  程序</p>
</blockquote>
<blockquote>
<p>  fi</p>
</blockquote>
<blockquote>
<p>  或者</p>
</blockquote>
<blockquote>
<p>  if [ 条件判断式 ]</p>
</blockquote>
<blockquote>
<p>  then</p>
</blockquote>
<blockquote>
<p>  程序</p>
</blockquote>
<blockquote>
<p>  fi</p>
</blockquote>
<p>注意事项：</p>
<p>（1）[ 条件判断式 ]，中括号和条件判断式之间必须有空格</p>
<p>（2）if后要有空格</p>
<p>2．案例实操</p>
<p>（1）输入一个数字，如果是1，则输出banzhang zhen shuai，如果是2，则输出cls zhen<br>mei，如果是其它，什么也不输出。</p>
<blockquote>
<p>  [atguigu@hadoop101 datas]$ touch if.sh</p>
</blockquote>
<blockquote>
<p>  [atguigu@hadoop101 datas]$ vim if.sh</p>
</blockquote>
<blockquote>
<p>  #!/bin/bash</p>
</blockquote>
<blockquote>
<p>  if [ $1 -eq “1” ]</p>
</blockquote>
<blockquote>
<p>  then</p>
</blockquote>
<blockquote>
<p>  echo “banzhang zhen shuai”</p>
</blockquote>
<blockquote>
<p>  elif [ $1 -eq “2” ]</p>
</blockquote>
<blockquote>
<p>  then</p>
</blockquote>
<blockquote>
<p>  echo “cls zhen mei”</p>
</blockquote>
<blockquote>
<p>  fi</p>
</blockquote>
<blockquote>
<p>  [atguigu@hadoop101 datas]$ chmod 777 if.sh</p>
</blockquote>
<blockquote>
<p>  [atguigu@hadoop101 datas]$ ./if.sh 1</p>
</blockquote>
<blockquote>
<p>  banzhang zhen shuai</p>
</blockquote>
<h2 id="7-2-case-语句"><a href="#7-2-case-语句" class="headerlink" title="7.2 case 语句"></a>7.2 case 语句</h2><p>1．基本语法</p>
<blockquote>
<p>  case $变量名 in</p>
</blockquote>
<blockquote>
<p>  “值1”）</p>
</blockquote>
<blockquote>
<p>  如果变量的值等于值1，则执行程序1</p>
</blockquote>
<blockquote>
<p>  ;;</p>
</blockquote>
<blockquote>
<p>  “值2”）</p>
</blockquote>
<blockquote>
<p>  如果变量的值等于值2，则执行程序2</p>
</blockquote>
<blockquote>
<p>  ;;</p>
</blockquote>
<blockquote>
<p>  …省略其他分支…</p>
</blockquote>
<blockquote>
<p>  *）</p>
</blockquote>
<blockquote>
<p>  如果变量的值都不是以上的值，则执行此程序</p>
</blockquote>
<blockquote>
<p>  ;;</p>
</blockquote>
<blockquote>
<p>  esac</p>
</blockquote>
<blockquote>
<p>  注意事项：</p>
</blockquote>
<ol>
<li><p> case行尾必须为单词“in”，每一个模式匹配必须以右括号“）”结束。</p>
</li>
<li><p> 双分号“**;;**”表示命令序列结束，相当于java中的break。</p>
</li>
<li><p> 最后的“*）”表示默认模式，相当于java中的default。</p>
</li>
</ol>
<p>2．案例实操</p>
<p>（1）输入一个数字，如果是1，则输出banzhang，如果是2，则输出cls，如果是其它，输出renyao。</p>
<blockquote>
<p>  [atguigu@hadoop101 datas]$ touch case.sh</p>
</blockquote>
<blockquote>
<p>  [atguigu@hadoop101 datas]$ vim case.sh</p>
</blockquote>
<blockquote>
<p>  !/bin/bash</p>
</blockquote>
<blockquote>
<p>  case $1 in</p>
</blockquote>
<blockquote>
<p>  “1”)</p>
</blockquote>
<blockquote>
<p>  echo “banzhang”</p>
</blockquote>
<blockquote>
<p>  ;;</p>
</blockquote>
<blockquote>
<p>  “2”)</p>
</blockquote>
<blockquote>
<p>  echo “cls”</p>
</blockquote>
<blockquote>
<p>  ;;</p>
</blockquote>
<blockquote>
<p>  *)</p>
</blockquote>
<blockquote>
<p>  echo “renyao”</p>
</blockquote>
<blockquote>
<p>  ;;</p>
</blockquote>
<blockquote>
<p>  esac</p>
</blockquote>
<blockquote>
<p>  [atguigu@hadoop101 datas]$ chmod 777 case.sh</p>
</blockquote>
<blockquote>
<p>  [atguigu@hadoop101 datas]$ ./case.sh 1</p>
</blockquote>
<blockquote>
<p>  1</p>
</blockquote>
<h2 id="7-3-for-循环"><a href="#7-3-for-循环" class="headerlink" title="7.3 for 循环"></a>7.3 for 循环</h2><p>1．基本语法1</p>
<p>for (( 初始值;循环控制条件;变量变化 ))</p>
<blockquote>
<p>  do</p>
</blockquote>
<blockquote>
<p>  程序</p>
</blockquote>
<blockquote>
<p>  done</p>
</blockquote>
<p>2．案例实操</p>
<blockquote>
<p>  （1）从1加到100</p>
</blockquote>
<blockquote>
<p>  [atguigu@hadoop101 datas]$ touch for1.sh</p>
</blockquote>
<blockquote>
<p>  [atguigu@hadoop101 datas]$ vim for1.sh</p>
</blockquote>
<blockquote>
<p>  #!/bin/bash</p>
</blockquote>
<blockquote>
<p>  s=0</p>
</blockquote>
<blockquote>
<p>  for((i=0;i&lt;=100;i++))</p>
</blockquote>
<blockquote>
<p>  do</p>
</blockquote>
<blockquote>
<p>  s=$[$s+$i]</p>
</blockquote>
<blockquote>
<p>  done</p>
</blockquote>
<blockquote>
<p>  echo $s</p>
</blockquote>
<blockquote>
<p>  [atguigu@hadoop101 datas]$ chmod 777 for1.sh</p>
</blockquote>
<blockquote>
<p>  [atguigu@hadoop101 datas]$ ./for1.sh</p>
</blockquote>
<blockquote>
<p>  “5050”</p>
</blockquote>
<p>3．基本语法2</p>
<blockquote>
<p>  for 变量 in 值1 值2 值3…</p>
</blockquote>
<blockquote>
<p>  do</p>
</blockquote>
<blockquote>
<p>  程序</p>
</blockquote>
<blockquote>
<p>  done</p>
</blockquote>
<p>4．案例实操</p>
<p>（1）打印所有输入参数</p>
<blockquote>
<p>  [atguigu@hadoop101 datas]$ touch for2.sh</p>
</blockquote>
<blockquote>
<p>  [atguigu@hadoop101 datas]$ vim for2.sh</p>
</blockquote>
<blockquote>
<p>  #!/bin/bash</p>
</blockquote>
<blockquote>
<p>  #打印数字</p>
</blockquote>
<blockquote>
<p>  for i in $*</p>
</blockquote>
<blockquote>
<p>  do</p>
</blockquote>
<blockquote>
<p>  echo “ban zhang love $i “</p>
</blockquote>
<blockquote>
<p>  done</p>
</blockquote>
<blockquote>
<p>  [atguigu@hadoop101 datas]$ chmod 777 for2.sh</p>
</blockquote>
<blockquote>
<p>  [atguigu@hadoop101 datas]$ bash for2.sh cls xz bd</p>
</blockquote>
<blockquote>
<p>  ban zhang love cls</p>
</blockquote>
<blockquote>
<p>  ban zhang love xz</p>
</blockquote>
<blockquote>
<p>  ban zhang love bd</p>
</blockquote>
<p>（2）比较$*和$@区别</p>
<p>（a）$*和$@都表示传递给函数或脚本的所有参数，不被双引号“”包含时，都以$1 $2<br>…$n的形式输出所有参数。</p>
<table>
<thead>
<tr>
<th>[atguigu@hadoop101 datas]$ touch for.sh [atguigu@hadoop101 datas]$ vim for.sh  #!/bin/bash   for i in $* do  echo “ban zhang love $i “ done  for j in $@ do   echo “ban zhang love $j” done  [atguigu@hadoop101 datas]$ bash for.sh cls xz bd ban zhang love cls  ban zhang love xz  ban zhang love bd  ban zhang love cls ban zhang love xz ban zhang love bd</th>
</tr>
</thead>
</table>
<p>（b）当它们被双引号“”包含时，“$*”会将所有的参数作为一个整体，以“$1 $2<br>…$n”的形式输出所有参数；“$@”会将各个参数分开，以“$1”<br>“$2”…”$n”的形式输出所有参数。</p>
<blockquote>
<p>  [atguigu@hadoop101 datas]$ vim for.sh</p>
</blockquote>
<blockquote>
<p>  #!/bin/bash</p>
</blockquote>
<blockquote>
<p>  for i in “$*“</p>
</blockquote>
<blockquote>
<p>  #$*中的所有参数看成是一个整体，所以这个for循环只会循环一次</p>
</blockquote>
<blockquote>
<p>  do</p>
</blockquote>
<blockquote>
<p>  echo “ban zhang love $i”</p>
</blockquote>
<blockquote>
<p>  done</p>
</blockquote>
<blockquote>
<p>  for j in “$@”</p>
</blockquote>
<blockquote>
<p>  #$@中的每个参数都看成是独立的，所以“$@”中有几个参数，就会循环几次</p>
</blockquote>
<blockquote>
<p>  do</p>
</blockquote>
<blockquote>
<p>  echo “ban zhang love $j”</p>
</blockquote>
<blockquote>
<p>  done</p>
</blockquote>
<blockquote>
<p>  [atguigu@hadoop101 datas]$ chmod 777 for.sh</p>
</blockquote>
<blockquote>
<p>  [atguigu@hadoop101 datas]$ bash for.sh cls xz bd</p>
</blockquote>
<blockquote>
<p>  ban zhang love cls xz bd</p>
</blockquote>
<blockquote>
<p>  ban zhang love cls</p>
</blockquote>
<blockquote>
<p>  ban zhang love xz</p>
</blockquote>
<blockquote>
<p>  ban zhang love bd</p>
</blockquote>
<h2 id="7-4-while-循环"><a href="#7-4-while-循环" class="headerlink" title="7.4 while 循环"></a>7.4 while 循环</h2><p>1．基本语法</p>
<blockquote>
<p>  while [ 条件判断式 ]</p>
</blockquote>
<blockquote>
<p>  do</p>
</blockquote>
<blockquote>
<p>  程序</p>
</blockquote>
<blockquote>
<p>  done</p>
</blockquote>
<p>2．案例实操</p>
<p>（1）从1加到100</p>
<blockquote>
<p>  [atguigu@hadoop101 datas]$ touch while.sh</p>
</blockquote>
<blockquote>
<p>  [atguigu@hadoop101 datas]$ vim while.sh</p>
</blockquote>
<blockquote>
<p>  #!/bin/bash</p>
</blockquote>
<blockquote>
<p>  s=0</p>
</blockquote>
<blockquote>
<p>  i=1</p>
</blockquote>
<blockquote>
<p>  while [ $i -le 100 ]</p>
</blockquote>
<blockquote>
<p>  do</p>
</blockquote>
<blockquote>
<p>  s=$[$s+$i]</p>
</blockquote>
<blockquote>
<p>  i=$[$i+1]</p>
</blockquote>
<blockquote>
<p>  done</p>
</blockquote>
<blockquote>
<p>  echo $s</p>
</blockquote>
<blockquote>
<p>  [atguigu@hadoop101 datas]$ chmod 777 while.sh</p>
</blockquote>
<blockquote>
<p>  [atguigu@hadoop101 datas]$ ./while.sh</p>
</blockquote>
<blockquote>
<p>  5050</p>
</blockquote>
<h1 id="第8章-read读取控制台输入"><a href="#第8章-read读取控制台输入" class="headerlink" title="第8章 read读取控制台输入"></a>第8章 read读取控制台输入</h1><p>1．基本语法</p>
<p>read(选项)(参数)</p>
<p>选项：</p>
<blockquote>
<p>  -p：指定读取值时的提示符；</p>
</blockquote>
<blockquote>
<p>  -t：指定读取值时等待的时间（秒）。</p>
</blockquote>
<blockquote>
<p>  参数</p>
</blockquote>
<blockquote>
<p>  变量：指定读取值的变量名</p>
</blockquote>
<p>2．案例实操</p>
<p>（1）提示7秒内，读取控制台输入的名称</p>
<blockquote>
<p>  [atguigu@hadoop101 datas]$ touch read.sh</p>
</blockquote>
<blockquote>
<p>  [atguigu@hadoop101 datas]$ vim read.sh</p>
</blockquote>
<blockquote>
<p>  #!/bin/bash</p>
</blockquote>
<blockquote>
<p>  read -t 7 -p “Enter your name in 7 seconds “ NAME</p>
</blockquote>
<blockquote>
<p>  echo $NAME</p>
</blockquote>
<blockquote>
<p>  [atguigu@hadoop101 datas]$ ./read.sh</p>
</blockquote>
<blockquote>
<p>  Enter your name in 7 seconds xiaoze</p>
</blockquote>
<blockquote>
<p>  xiaoze</p>
</blockquote>
<h1 id="第9章-函数"><a href="#第9章-函数" class="headerlink" title="第9章 函数"></a>第9章 函数</h1><h2 id="9-1-系统函数"><a href="#9-1-系统函数" class="headerlink" title="9.1 系统函数"></a>9.1 系统函数</h2><p>1．basename基本语法</p>
<p>basename [string / pathname] [suffix]<br>（功能描述：basename命令会删掉所有的前缀包括最后一个（‘/’）字符，然后将字符串显示出来。</p>
<p>选项：</p>
<p>suffix为后缀，如果suffix被指定了，basename会将pathname或string中的suffix去掉。</p>
<p>2．案例实操</p>
<p>（1）截取该/home/atguigu/banzhang.txt路径的文件名称</p>
<blockquote>
<p>  [atguigu@hadoop101 datas]$ basename /home/atguigu/banzhang.txt</p>
</blockquote>
<blockquote>
<p>  banzhang.txt</p>
</blockquote>
<blockquote>
<p>  [atguigu@hadoop101 datas]$ basename /home/atguigu/banzhang.txt .txt</p>
</blockquote>
<blockquote>
<p>  banzhang</p>
</blockquote>
<p>3. dirname基本语法</p>
<p>dirname 文件绝对路径<br>（功能描述：从给定的包含绝对路径的文件名中去除文件名（非目录的部分），然后返回剩下的路径（目录的部分））</p>
<p>4．案例实操</p>
<p>（1）获取banzhang.txt文件的路径</p>
<blockquote>
<p>  [atguigu@hadoop101 ~]$ dirname /home/atguigu/banzhang.txt</p>
</blockquote>
<blockquote>
<p>  /home/atguigu</p>
</blockquote>
<h2 id="9-2-自定义函数"><a href="#9-2-自定义函数" class="headerlink" title="9.2 自定义函数"></a>9.2 自定义函数</h2><p>1．基本语法</p>
<blockquote>
<p>  [ function ] funname[()]</p>
</blockquote>
<blockquote>
<p>  {</p>
</blockquote>
<blockquote>
<p>  Action;</p>
</blockquote>
<blockquote>
<p>  [return int;]</p>
</blockquote>
<blockquote>
<p>  }</p>
</blockquote>
<blockquote>
<p>  funname</p>
</blockquote>
<p>2．经验技巧</p>
<p>（1）必须在调用函数地方之前，先声明函数，shell脚本是逐行运行。不会像其它语言一样先编译。</p>
<p>（2）函数返回值，只能通过$?系统变量获得，可以显示加：return返回，如果不加，将以最后一条命令运行结果，作为返回值。return后跟数值n(0-255)</p>
<p>3．案例实操</p>
<p>（1）计算两个输入参数的和</p>
<blockquote>
<p>  [atguigu@hadoop101 datas]$ touch fun.sh</p>
</blockquote>
<blockquote>
<p>  [atguigu@hadoop101 datas]$ vim fun.sh</p>
</blockquote>
<blockquote>
<p>  #!/bin/bash</p>
</blockquote>
<blockquote>
<p>  function sum()</p>
</blockquote>
<blockquote>
<p>  {</p>
</blockquote>
<blockquote>
<p>  s=0</p>
</blockquote>
<blockquote>
<p>  s=$[ $1 + $2 ]</p>
</blockquote>
<blockquote>
<p>  echo “$s”</p>
</blockquote>
<blockquote>
<p>  }</p>
</blockquote>
<blockquote>
<p>  read -p “Please input the number1: “ n1;</p>
</blockquote>
<blockquote>
<p>  read -p “Please input the number2: “ n2;</p>
</blockquote>
<blockquote>
<p>  sum $n1 $n2;</p>
</blockquote>
<blockquote>
<p>  [atguigu@hadoop101 datas]$ chmod 777 fun.sh</p>
</blockquote>
<blockquote>
<p>  [atguigu@hadoop101 datas]$ ./fun.sh</p>
</blockquote>
<blockquote>
<p>  Please input the number1: 2</p>
</blockquote>
<blockquote>
<p>  Please input the number2: 5</p>
</blockquote>
<blockquote>
<p>  7</p>
</blockquote>
<h1 id="第10章-Shell工具（重点）"><a href="#第10章-Shell工具（重点）" class="headerlink" title="第10章 Shell工具（重点）"></a>第10章 Shell工具（重点）</h1><h2 id="10-1-cut"><a href="#10-1-cut" class="headerlink" title="10.1 cut"></a>10.1 cut</h2><p>cut的工作就是“剪”，具体的说就是在文件中负责剪切数据用的。cut<br>命令从文件的每一行剪切字节、字符和字段并将这些字节、字符和字段输出。</p>
<p>1.基本用法</p>
<p>cut [选项参数] filename</p>
<p>说明：默认分隔符是制表符</p>
<p>2.选项参数说明</p>
<p>表1-55</p>
<table>
<thead>
<tr>
<th>选项参数</th>
<th>功能</th>
</tr>
</thead>
<tbody><tr>
<td>-f</td>
<td>列号，提取第几列</td>
</tr>
<tr>
<td>-d</td>
<td>分隔符，按照指定分隔符分割列</td>
</tr>
</tbody></table>
<p>3.案例实操</p>
<blockquote>
<p>  （0）数据准备</p>
</blockquote>
<blockquote>
<p>  [atguigu@hadoop101 datas]$ touch cut.txt</p>
</blockquote>
<blockquote>
<p>  [atguigu@hadoop101 datas]$ vim cut.txt</p>
</blockquote>
<blockquote>
<p>  dong shen</p>
</blockquote>
<blockquote>
<p>  guan zhen</p>
</blockquote>
<blockquote>
<p>  wo wo</p>
</blockquote>
<blockquote>
<p>  lai lai</p>
</blockquote>
<blockquote>
<p>  le le</p>
</blockquote>
<blockquote>
<p>  （1）切割cut.txt第一列</p>
</blockquote>
<blockquote>
<p>  [atguigu@hadoop101 datas]$ cut -d “ “ -f 1 cut.txt</p>
</blockquote>
<blockquote>
<p>  dong</p>
</blockquote>
<blockquote>
<p>  guan</p>
</blockquote>
<blockquote>
<p>  wo</p>
</blockquote>
<blockquote>
<p>  lai</p>
</blockquote>
<blockquote>
<p>  le</p>
</blockquote>
<blockquote>
<p>  （2）切割cut.txt第二、三列</p>
</blockquote>
<blockquote>
<p>  [atguigu@hadoop101 datas]$ cut -d “ “ -f 2,3 cut.txt</p>
</blockquote>
<blockquote>
<p>  shen</p>
</blockquote>
<blockquote>
<p>  zhen</p>
</blockquote>
<blockquote>
<p>  wo</p>
</blockquote>
<blockquote>
<p>  lai</p>
</blockquote>
<blockquote>
<p>  le</p>
</blockquote>
<blockquote>
<p>  （3）在cut.txt文件中切割出guan</p>
</blockquote>
<blockquote>
<p>  [atguigu@hadoop101 datas]$ cat cut.txt | grep “guan” | cut -d “ “ -f 1</p>
</blockquote>
<blockquote>
<p>  guan</p>
</blockquote>
<blockquote>
<p>  （4）选取系统PATH变量值，第2个“：”开始后的所有路径：</p>
</blockquote>
<blockquote>
<p>  [atguigu@hadoop101 datas]$ echo $PATH</p>
</blockquote>
<blockquote>
<p>  /usr/lib64/qt-3.3/bin:/usr/local/bin:/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/sbin:/home/atguigu/bin</p>
</blockquote>
<blockquote>
<p>  [atguigu@hadoop102 datas]$ echo $PATH | cut -d: -f 2-</p>
</blockquote>
<blockquote>
<p>  /usr/local/bin:/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/sbin:/home/atguigu/bin</p>
</blockquote>
<blockquote>
<p>  （5）切割ifconfig 后打印的IP地址</p>
</blockquote>
<blockquote>
<p>  [atguigu@hadoop101 datas]$ ifconfig eth0 | grep “inet addr” | cut -d: -f<br>  2 | cut -d” “ -f1</p>
</blockquote>
<blockquote>
<p>  192.168.1.102</p>
</blockquote>
<h2 id="10-2-sed"><a href="#10-2-sed" class="headerlink" title="10.2 sed"></a>10.2 sed</h2><p>sed是一种流编辑器，它一次处理一行内容。处理时，把当前处理的行存储在临时缓冲区中，称为“模式空间”，接着用sed命令处理缓冲区中的内容，处理完成后，把缓冲区的内容送往屏幕。接着处理下一行，这样不断重复，直到文件末尾。文件内容并没有改变，除非你使用重定向存储输出。</p>
<ol>
<li><p>基本用法</p>
<p> sed [选项参数] ‘command’ filename</p>
</li>
<li><p> 选项参数说明</p>
</li>
</ol>
<p>表1-56</p>
<table>
<thead>
<tr>
<th>选项参数</th>
<th>功能</th>
</tr>
</thead>
<tbody><tr>
<td>-e</td>
<td>直接在指令列模式上进行sed的动作编辑。</td>
</tr>
</tbody></table>
<ol>
<li> 命令功能描述</li>
</ol>
<p>表1-57</p>
<table>
<thead>
<tr>
<th>命令</th>
<th>功能描述</th>
</tr>
</thead>
<tbody><tr>
<td><em>a</em></td>
<td>新增，a的后面可以接字串，在下一行出现</td>
</tr>
<tr>
<td>d</td>
<td>删除</td>
</tr>
<tr>
<td>s</td>
<td>查找并替换</td>
</tr>
</tbody></table>
<ol>
<li> 案例实操</li>
</ol>
<p>（0）数据准备</p>
<blockquote>
<p>  [atguigu@hadoop102 datas]$ touch sed.txt</p>
</blockquote>
<blockquote>
<p>  [atguigu@hadoop102 datas]$ vim sed.txt</p>
</blockquote>
<blockquote>
<p>  dong shen</p>
</blockquote>
<blockquote>
<p>  guan zhen</p>
</blockquote>
<blockquote>
<p>  wo wo</p>
</blockquote>
<blockquote>
<p>  lai lai</p>
</blockquote>
<blockquote>
<p>  le le</p>
</blockquote>
<p>（1）将“mei nv”这个单词插入到sed.txt第二行下，打印。</p>
<blockquote>
<p>  [atguigu@hadoop102 datas]$ sed ‘2a mei nv’ sed.txt</p>
</blockquote>
<blockquote>
<p>  dong shen</p>
</blockquote>
<blockquote>
<p>  guan zhen</p>
</blockquote>
<blockquote>
<p>  mei nv</p>
</blockquote>
<blockquote>
<p>  wo wo</p>
</blockquote>
<blockquote>
<p>  lai lai</p>
</blockquote>
<blockquote>
<p>  le le</p>
</blockquote>
<blockquote>
<p>  [atguigu@hadoop102 datas]$ cat sed.txt</p>
</blockquote>
<blockquote>
<p>  dong shen</p>
</blockquote>
<blockquote>
<p>  guan zhen</p>
</blockquote>
<blockquote>
<p>  wo wo</p>
</blockquote>
<blockquote>
<p>  lai lai</p>
</blockquote>
<blockquote>
<p>  le le</p>
</blockquote>
<blockquote>
<p>  注意：文件并没有改变</p>
</blockquote>
<p>（2）删除sed.txt文件所有包含wo的行</p>
<blockquote>
<p>  [atguigu@hadoop102 datas]$ sed ‘/wo/d’ sed.txt</p>
</blockquote>
<blockquote>
<p>  dong shen</p>
</blockquote>
<blockquote>
<p>  guan zhen</p>
</blockquote>
<blockquote>
<p>  lai lai</p>
</blockquote>
<blockquote>
<p>  le le</p>
</blockquote>
<p>（3）将sed.txt文件中wo替换为ni</p>
<blockquote>
<p>  [atguigu@hadoop102 datas]$ sed ‘s/wo/ni/g’ sed.txt</p>
</blockquote>
<blockquote>
<p>  dong shen</p>
</blockquote>
<blockquote>
<p>  guan zhen</p>
</blockquote>
<blockquote>
<p>  ni ni</p>
</blockquote>
<blockquote>
<p>  lai lai</p>
</blockquote>
<blockquote>
<p>  le le</p>
</blockquote>
<blockquote>
<p>  注意：‘g’表示global，全部替换</p>
</blockquote>
<blockquote>
<p>  （4）将sed.txt文件中的第二行删除并将wo替换为ni</p>
</blockquote>
<blockquote>
<p>  [atguigu@hadoop102 datas]$ sed -e ‘2d’ -e ‘s/wo/ni/g’ sed.txt</p>
</blockquote>
<blockquote>
<p>  dong shen</p>
</blockquote>
<blockquote>
<p>  ni ni</p>
</blockquote>
<blockquote>
<p>  lai lai</p>
</blockquote>
<blockquote>
<p>  le le</p>
</blockquote>
<h2 id="10-3-awk"><a href="#10-3-awk" class="headerlink" title="10.3 awk"></a>10.3 awk</h2><p>一个强大的文本分析工具，把文件逐行的读入，以空格为默认分隔符将每行切片，切开的部分再进行分析处理。</p>
<ol>
<li><p>基本用法</p>
<p> awk [选项参数] ‘pattern1{action1} pattern2{action2}…’ filename</p>
<p> pattern：表示AWK在数据中查找的内容，就是匹配模式</p>
<p> action：在找到匹配内容时所执行的一系列命令</p>
</li>
<li><p> 选项参数说明</p>
</li>
</ol>
<p>表1-55</p>
<table>
<thead>
<tr>
<th>选项参数</th>
<th>功能</th>
</tr>
</thead>
<tbody><tr>
<td>-F</td>
<td>指定输入文件折分隔符</td>
</tr>
<tr>
<td>-v</td>
<td>赋值一个用户定义变量</td>
</tr>
</tbody></table>
<ol>
<li><p>案例实操</p>
<p> （0）数据准备</p>
<p> [atguigu@hadoop102 datas]$ sudo cp /etc/passwd ./</p>
</li>
</ol>
<p>（1）搜索passwd文件以root关键字开头的所有行，并输出该行的第7列。</p>
<blockquote>
<p>  [atguigu@hadoop102 datas]$ awk -F: ‘/^root/{print $7}’ passwd</p>
</blockquote>
<blockquote>
<p>  /bin/bash</p>
</blockquote>
<p>（2）搜索passwd文件以root关键字开头的所有行，并输出该行的第1列和第7列，中间以“，”号分割。</p>
<blockquote>
<p>  [atguigu@hadoop102 datas]$ awk -F: ‘/^root/{print $1”,”$7}’ passwd</p>
</blockquote>
<blockquote>
<p>  root,/bin/bash</p>
</blockquote>
<blockquote>
<p>  注意：只有匹配了pattern的行才会执行action</p>
</blockquote>
<p>（3）只显示/etc/passwd的第一列和第七列，以逗号分割，且在所有行前面添加列名user，shell在最后一行添加”dahaige，/bin/zuishuai”。</p>
<blockquote>
<p>  [atguigu@hadoop102 datas]$ awk -F : ‘BEGIN{print “user, shell”} {print<br>  $1”,”$7} END{print “dahaige,/bin/zuishuai”}’ passwd</p>
</blockquote>
<blockquote>
<p>  user, shell</p>
</blockquote>
<blockquote>
<p>  root,/bin/bash</p>
</blockquote>
<blockquote>
<p>  bin,/sbin/nologin</p>
</blockquote>
<blockquote>
<p>  。。。</p>
</blockquote>
<blockquote>
<p>  atguigu,/bin/bash</p>
</blockquote>
<blockquote>
<p>  dahaige,/bin/zuishuai</p>
</blockquote>
<blockquote>
<p>  注意：BEGIN 在所有数据读取行之前执行；END 在所有数据执行之后执行。</p>
</blockquote>
<p>（4）将passwd文件中的用户id增加数值1并输出</p>
<blockquote>
<p>  [atguigu@hadoop102 datas]$ awk -v i=1 -F: ‘{print $3+i}’ passwd</p>
</blockquote>
<blockquote>
<p>  1</p>
</blockquote>
<blockquote>
<p>  2</p>
</blockquote>
<blockquote>
<p>  3</p>
</blockquote>
<blockquote>
<p>  4</p>
</blockquote>
<ol>
<li><p>awk的内置变量</p>
<p> 表1-56</p>
</li>
</ol>
<table>
<thead>
<tr>
<th>变量</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>FILENAME</td>
<td>文件名</td>
</tr>
<tr>
<td>NR</td>
<td>已读的记录数</td>
</tr>
<tr>
<td>NF</td>
<td>浏览记录的域的个数（切割后，列的个数）</td>
</tr>
</tbody></table>
<ol>
<li><p>案例实操</p>
<p> （1）统计passwd文件名，每行的行号，每行的列数</p>
<p> [atguigu@hadoop102 datas]$ awk -F: ‘{print “filename:” FILENAME “,<br> linenumber:” NR “,columns:” NF}’ passwd</p>
<p> filename:passwd, linenumber:1,columns:7</p>
<p> filename:passwd, linenumber:2,columns:7</p>
<p> filename:passwd, linenumber:3,columns:7</p>
</li>
</ol>
<p>（2）切割IP</p>
<blockquote>
<p>  [atguigu@hadoop102 datas]$ ifconfig eth0 | grep “inet addr” | awk -F:<br>  ‘{print $2}’ | awk -F “ “ ‘{print $1}’</p>
</blockquote>
<blockquote>
<p>  192.168.1.102</p>
</blockquote>
<p>（3）查询sed.txt中空行所在的行号</p>
<blockquote>
<p>  [atguigu@hadoop102 datas]$ awk ‘/^$/{print NR}’ sed.txt</p>
</blockquote>
<blockquote>
<p>  5</p>
</blockquote>
<h2 id="10-4-sort"><a href="#10-4-sort" class="headerlink" title="10.4 sort"></a>10.4 sort</h2><p>sort命令是在Linux里非常有用，它将文件进行排序，并将排序结果标准输出。</p>
<ol>
<li><p>基本语法</p>
<p> sort(选项)(参数)</p>
<p> 表1-57</p>
</li>
</ol>
<table>
<thead>
<tr>
<th>选项</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>-n</td>
<td>依照数值的大小排序</td>
</tr>
<tr>
<td>-r</td>
<td>以相反的顺序来排序</td>
</tr>
<tr>
<td>-t</td>
<td>设置排序时所用的分隔字符</td>
</tr>
<tr>
<td>-k</td>
<td>指定需要排序的列</td>
</tr>
</tbody></table>
<blockquote>
<p>  参数：指定待排序的文件列表</p>
</blockquote>
<p>2. 案例实操</p>
<blockquote>
<p>  （0）数据准备</p>
</blockquote>
<blockquote>
<p>  [atguigu@hadoop102 datas]$ touch sort.sh</p>
</blockquote>
<blockquote>
<p>  [atguigu@hadoop102 datas]$ vim sort.sh</p>
</blockquote>
<blockquote>
<p>  bb:40:5.4</p>
</blockquote>
<blockquote>
<p>  bd:20:4.2</p>
</blockquote>
<blockquote>
<p>  xz:50:2.3</p>
</blockquote>
<blockquote>
<p>  cls:10:3.5</p>
</blockquote>
<blockquote>
<p>  ss:30:1.6</p>
</blockquote>
<blockquote>
<p>  （1）按照“：”分割后的第三列倒序排序。</p>
</blockquote>
<blockquote>
<p>  [atguigu@hadoop102 datas]$ sort -t : -nrk 3 sort.sh</p>
</blockquote>
<blockquote>
<p>  bb:40:5.4</p>
</blockquote>
<blockquote>
<p>  bd:20:4.2</p>
</blockquote>
<blockquote>
<p>  cls:10:3.5</p>
</blockquote>
<blockquote>
<p>  xz:50:2.3</p>
</blockquote>
<blockquote>
<p>  ss:30:1.6</p>
</blockquote>
<h1 id="第11章-企业真实面试题（重点）"><a href="#第11章-企业真实面试题（重点）" class="headerlink" title="第11章 企业真实面试题（重点）"></a>第11章 企业真实面试题（重点）</h1><h2 id="11-1-京东"><a href="#11-1-京东" class="headerlink" title="11.1 京东"></a>11.1 京东</h2><blockquote>
<p>  问题1：使用Linux命令查询file1中空行所在的行号</p>
</blockquote>
<blockquote>
<p>  答案：</p>
</blockquote>
<blockquote>
<p>  [atguigu@hadoop102 datas]$ awk ‘/^$/{print NR}’ sed.txt</p>
</blockquote>
<blockquote>
<p>  5</p>
</blockquote>
<blockquote>
<p>  问题2：有文件chengji.txt内容如下:</p>
</blockquote>
<blockquote>
<p>  张三 40</p>
</blockquote>
<blockquote>
<p>  李四 50</p>
</blockquote>
<blockquote>
<p>  王五 60</p>
</blockquote>
<p>使用Linux命令计算第二列的和并输出</p>
<blockquote>
<p>  [atguigu@hadoop102 datas]$ cat chengji.txt | awk -F “ “ ‘{sum+=$2}<br>  END{print sum}’</p>
</blockquote>
<blockquote>
<p>  150</p>
</blockquote>
<h2 id="11-2-搜狐-amp-和讯网"><a href="#11-2-搜狐-amp-和讯网" class="headerlink" title="11.2 搜狐&amp;和讯网"></a>11.2 搜狐&amp;和讯网</h2><p>问题1：Shell脚本里如何检查一个文件是否存在？如果不存在该如何处理？</p>
<blockquote>
<p>  #!/bin/bash</p>
</blockquote>
<blockquote>
<p>  if [ -f file.txt ]; then</p>
</blockquote>
<blockquote>
<p>  echo “文件存在!”</p>
</blockquote>
<blockquote>
<p>  else</p>
</blockquote>
<blockquote>
<p>  echo “文件不存在!”</p>
</blockquote>
<blockquote>
<p>  fi</p>
</blockquote>
<h2 id="11-3-新浪"><a href="#11-3-新浪" class="headerlink" title="11.3 新浪"></a>11.3 新浪</h2><p>问题1：用shell写一个脚本，对文本中无序的一列数字排序</p>
<blockquote>
<p>  [root@CentOS6-2 ~]# cat test.txt</p>
</blockquote>
<blockquote>
<p>  9</p>
</blockquote>
<blockquote>
<p>  8</p>
</blockquote>
<blockquote>
<p>  7</p>
</blockquote>
<blockquote>
<p>  6</p>
</blockquote>
<blockquote>
<p>  5</p>
</blockquote>
<blockquote>
<p>  4</p>
</blockquote>
<blockquote>
<p>  3</p>
</blockquote>
<blockquote>
<p>  2</p>
</blockquote>
<blockquote>
<p>  10</p>
</blockquote>
<blockquote>
<p>  1</p>
</blockquote>
<blockquote>
<p>  [root@CentOS6-2 ~]# sort -n test.txt|awk ‘{a+=$0;print $0}END{print<br>  “SUM=”a}’</p>
</blockquote>
<blockquote>
<p>  1</p>
</blockquote>
<blockquote>
<p>  2</p>
</blockquote>
<blockquote>
<p>  3</p>
</blockquote>
<blockquote>
<p>  4</p>
</blockquote>
<blockquote>
<p>  5</p>
</blockquote>
<blockquote>
<p>  6</p>
</blockquote>
<blockquote>
<p>  7</p>
</blockquote>
<blockquote>
<p>  8</p>
</blockquote>
<blockquote>
<p>  9</p>
</blockquote>
<blockquote>
<p>  10</p>
</blockquote>
<blockquote>
<p>  SUM=55</p>
</blockquote>
<h2 id="11-3-金和网络"><a href="#11-3-金和网络" class="headerlink" title="11.3 金和网络"></a>11.3 金和网络</h2><p>问题1：请用shell脚本写出查找当前文件夹（/home）下所有的文本文件内容中包含有字符”shen”的文件名称</p>
<blockquote>
<p>  [atguigu@hadoop102 datas]$ grep -r “shen” /home | cut -d “:” -f 1</p>
</blockquote>
<blockquote>
<p>  /home/atguigu/datas/sed.txt</p>
</blockquote>
<blockquote>
<p>  /home/atguigu/datas/cut.txt</p>
</blockquote>
<p><img src="https://gitee.com/psycho1900/miss-reddle/raw/master/Shell.png"></p>
<p><em><strong>以上就是本次的全部内容 希望能对你有所帮助</strong></em></p>

    </div>
</div>
<style>
    #noneimg img {
        display: none;
        z-index: 109;
        width: 600px !important;
        border-radius: 0px;
        position: fixed;
        box-shadow: 0 0 0px #c3c3c300 !important;
        left: 0;
        top: 0;
        right: 0;
        bottom: 0;
        margin: auto !important;
    }

    @media screen and (max-width:600px) {
        #noneimg img {
            width: 88%
        }
    }
</style>
<script>
    $(function () { $('#article').click(function (e) { if (e.target.tagName == "IMG") { if ($('#nonediv').length == 0) { let MImg = `<div id='noneimg'><img src='${e.target.currentSrc}'></div>`; let MDiv = "<div id='nonediv' style='cursor: pointer;display: none; position: fixed;left: 0;top: 0; right: 0;bottom: 0;background-color: #333;opacity:0.5;z-index: 108;'></div>"; $('#article').append(MDiv); $('#article').append(MImg); $("#nonediv").fadeIn("slow"); $("#noneimg img").fadeIn("slow") } } else { if ($('#nonediv').length !== 0) { $("#noneimg ").fadeOut("slow"); $("#nonediv").fadeOut("slow"); setTimeout(function () { $('#nonediv').remove(); $('#noneimg').remove() }, 500) } } }); $('.article-content').addClass('content-move') });
</script>
<div class="Last-Next">
    
    <a href="/2021/05/19/Word%E6%96%87%E4%BB%B6%E8%BD%ACMD%E6%96%87%E4%BB%B6/">
        <div class="last">
            <span>上一篇</span>
            <p>Word文件转MD文件</p>
        </div>
    </a>
    

    
    <a href="/2021/05/14/Body-Senser-APP/">
        <div class="next">
            <span>下一篇</span>
            <p>Body Senser APP</p>
        </div>
    </a>
    
</div>
		
<link rel="stylesheet" href="/css/food.css">

<div class="footer">
	<div class="Copyright">
		©2022 By Russshare. 主题：<a
			style="text-decoration: none;display: contents; color: #898F9F;"
			target="_blank" rel="noopener" href="https://github.com/qiaobug/hexo-theme-quiet">Quiet</a>
	</div>
	<div class="contact">
		
		<a target="_blank" rel="noopener" href="https://github.com/RiddleGo">
			<img src="https://cdn.jsdelivr.net/gh/duogongneng/MyBlogImg/imggithub.png" alt="Quiet主题">
		</a>
		
	</div>
</div>

<script src="/js/jquery.min.js"></script>


<script src="/js/gotop.js"></script>


<style type="text/css">
    @media screen and (min-width: 600px) {
        .goTop>span {
            display: block;
            border-radius: 50%;
            width: 66px;
            height: 66px;
            cursor: pointer;
            opacity: 0.8;
            background: rgba(18, 24, 58, 0.06);
            text-align: center;
            border: 1px solid rgba(18, 24, 58, 0.06);

            transition: border .5s;
            -moz-transition: border .5s;
            /* Firefox 4 */
            -webkit-transition: border .5s;
            /* Safari 和 Chrome */
            -o-transition: border .5s;
            /* Opera */
        }

        .goTop>span:hover {
            border: 1px solid #6680B3;
        }


        .goTop {
            position: fixed;
            right: 30px;
            bottom: 80px;
        }

        .goTop>span>svg {
            width: 30px;
            height: 30px;
            margin-top: 17.5px;
            opacity: 0.7;
        }

    }

    @media screen and (max-width: 600px) {
        .goTop {
            display: none;
        }
    }
</style>
<div class="goTop" id="js-go_top">
    <span>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
            <g>
                <path d="M13 12v8h-2v-8H4l8-8 8 8z"></path>
            </g>
        </svg>
    </span>
</div>
<script>
    $('#js-go_top').gotoTop({ offset: 500, speed: 300, animationShow: { 'transform': 'translate(0,0)', 'transition': 'transform .5s ease-in-out' }, animationHide: { 'transform': 'translate(100px,0)', 'transition': 'transform .5s ease-in-out' } });
</script>
<script>
	console.log('\n %c Hexo-Quiet 主题 %c https://github.com/QiaoBug/hexo-theme-quiet \n', 'color: #fadfa3; background: #030307; padding:5px 0;', 'background: #fadfa3; padding:5px 0;')
</script>
	</body>

</html>